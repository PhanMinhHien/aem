<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dynamic_Links_Generator_AEM</title>
    <style>
        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: flex-start;
            gap: 20px;
            width: 100%;
            padding: 20px;
            background-color: #f4f4f9;
            box-sizing: border-box;
        }
        .link-part {
            background-color: black;
            display: inline-block;
            padding: 20px;
            color: #fff;
            border-radius: 5px;
        }
        @media (min-width: 1200px) {
            .column-left {
                flex: 1;
                padding-right: 20px;
                max-width: 50%;
                position: sticky;
                top: 30px;
            }
            .column-right {
                flex: 1;
                padding-left: 20px;
                max-width: 50%;
            }
        }
        #links:not(:empty),
        #fragmentContainer:not(:empty) {
            background-color: #e7e5b6;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            word-wrap: break-word;
            margin-bottom: 50px;
        }
        button {
            padding: 10px 15px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        button:hover {
            background-color: #0056b3;
        }
        .radio-group {
            column-count: 3;
        }
        input[type="text"],
        select {
            width: 100%;
            padding: 12px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
            background-color: #f9f9f9;
            transition: border-color 0.3s ease, background-color 0.3s ease;
        }
        input[type="text"]:focus,
        select:focus {
            border-color: #007bff;
            outline: none;
            background-color: #fff;
        }
        /* 
        .radio-group {
            margin: 20px 0;
        } */
        .radio-group label {
            display: block;
            margin-bottom: 10px;
            cursor: pointer;
        }
        .radio-group input[type="radio"] {
            margin-right: 10px;
        }
        #links a,
        #fragmentContainer a {
            display: block;
            color: #007bff;
            text-decoration: none;
            margin-bottom: 8px;
        }
        #links a:hover,
        #fragmentContainer a:hover {
            text-decoration: underline;
        }
        @media (max-width: 1200px) {
            .container {
                width: 100%;
            }
        }
        #localLanguages {
            column-count: 5;
        }
        input[type="checkbox"] {
            -webkit-appearance: none;
            appearance: none;
            background-color: #f0f0f0;
            margin: 0;
            font: inherit;
            color: #626262;
            width: 1.25em;
            height: 1.25em;
            border: 2px solid #b3b3b3;
            border-radius: 0.25em;
            display: inline-block;
            position: relative;
        }
        input[type="checkbox"]:checked {
            background-color: #4caf50;
            border-color: #4caf50;
        }
        input[type="checkbox"]:checked::before {
            content: "âœ“";
            font-weight: bold;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            text-align: center;
            line-height: 1.25em;
            color: white;
        }
        label {
            margin-left: 0.5em;
            font-size: 1em;
            font-weight: 400;
        }
        .local-languages {
            margin: 1em 0;
        }
        input[type="checkbox"]:hover {
            cursor: pointer;
            border-color: #4caf50;
        }
        .hidden {
            display: none;
        }
        a.previous {
            color: #05a769 !important;
        }
        a.active {
            color: red !important;
        }
        textarea {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            resize: unset;
        }
        #masterLanguage {
            width: auto;
        }
        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            z-index: 1000;
        }
        .close-btn {
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
        }
        #buttons,
        #buttons-input {
            display: flex;
            justify-content: start;
            gap: 10px;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        #buttons button {
            padding: 10px 20px;
            font-size: 14px;
            cursor: pointer;
        }
        #searchContainer {
            margin-bottom: 30px;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
        }
        .modal-content {
            background-color: #fff;
            margin: 0;
            padding: 20px;
            border: 1px solid #888;
            width: 70%;
            max-width: 50%;
            max-height: 50%;
            overflow-x: auto;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .hidden-input {
            opacity: 0.5;
            pointer-events: none;
            width: auto;
            text-align: center;
            padding: 10px 0;
        }
        .close-button {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            position: absolute;
            top: 0;
            right: 15px;
            cursor: pointer;
        }
        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-family: Arial, sans-serif;
            background-color: #fff;
        }
        th {
            background-color: #4caf50;
            color: white;
            padding: 12px 15px;
            text-align: left;
            font-weight: bold;
            font-size: 16px;
        }
        td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
            font-size: 14px;
        }
        tr:hover {
            background-color: #f1f1f1;
        }
        td,
        th {
            border: 1px solid #ddd;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        .table-container {
            max-width: 100%;
            overflow-x: auto;
        }
        #addFragment,
        #applySearchButton {
            margin-top: 25px;
        }
        #searchInput {
            margin-bottom: 25px;
        }
        .check {
            margin: 20px 0;
        }
        #floatingSavedBtn {
    position: fixed;
    bottom: 20px;
    left: 20px;
    width: 60px;
    height: 60px;
    background-color: #007bff;
    color: white;
    border-radius: 50%;
    text-align: center;
    line-height: 60px;
    font-size: 24px;
    cursor: pointer;
    z-index: 1000;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    transition: background-color 0.3s;
}
#floatingSavedBtn:hover {
    background-color: #0056b3;
}
    </style>
</head>
<body>
    <div class="container">
        <div class="column-left">
            <label for="masterLanguage">Master Language:</label>
            <select id="masterLanguage" onchange="updateLocalLanguages()">
                <option value="" selected disabled hidden>Choose here</option>
                <option value="en-GB">en-GB (Master)</option>
                <option value="bs-BS">bs-BS (Bosnia)</option>
                <option value="bg-BG">bg-BG (Bulgaria)</option>
                <option value="hr-HR">hr-HR (Croatia)</option>
                <option value="cs-CZ">cs-CZ (Czech)</option>
                <option value="da-DK">da-DK (Denmark)</option>
                <option value="et-EE">et-EE (Estonian)</option>
                <option value="fi-FI">fi-FI (Finland)</option>
                <option value="el-GR">el-GR (Greek)</option>
                <option value="hu-HU">hu-HU (Hungary)</option>
                <option value="it-IT">it-IT (Italy)</option>
                <option value="ja-JP">ja-JP (Japan)</option>
                <option value="ko-KR">ko-KR (Korea)</option>
                <option value="lv-LV">lv-LV (Latvia)</option>
                <option value="lt-LT">lt-LT (Lithuania)</option>
                <option value="no-NO">no-NO (Norway)</option>
                <option value="pl-PL">pl-PL (Poland)</option>
                <option value="ro-RO">ro-RO (Romania)</option>
                <option value="ru-RU">ru-RU (Russia)</option>
                <option value="sr-RS">sr-RS (Serbia)</option>
                <option value="sk-SK">sk-SK (Slovakia)</option>
                <option value="sl-SI">sl-SI (Slovenia)</option>
                <option value="sv-SE">sv-SE (Sweden)</option>
                <option value="th-TH">th-TH (Thailand)</option>
                <option value="tr-TR">tr-TR (Turkey)</option>
                <option value="uk-UA">uk-UA (Ukraine)</option>
                <option value="vi-VI">vi-VI (Vietnamese)</option>
                <option value="en-AU">en-AU (English (Australia))</option>
                <option value="en-US">en-US (English (USA))</option>
                <option value="de-DE">de-DE (Germany)</option>
                <option value="fr-FR">fr-FR (France)</option>
                <option value="pt-PT">pt-PT (Portugal)</option>
                <option value="es-ES">es-ES (Spain)</option>
                <option value="nl-NL">nl-NL (Netherlands)</option>
                <option value="zh-CN">zh-CN (China)</option>
            </select>
            <div id="localLanguages" class="local-languages"></div>
            <label for="customInput">Custom Input:</label>
            <input type="text" id="customInput" />
            <div id="buttons-input">
                <button id="generateAndSaveBtn">Generate & Save</button>
                <button onclick="generateLinks()">Generate</button>
                <button id="resetLinks">Reset Status Links</button>
                <button onclick="generateLanguageSuggestions()">Suggest Language</button>
                <!-- <button id="saveButton" onclick="processAndAddCustomInput()" style="display: none;">Save</button> -->
                <!-- <button id="toggleSaveButton" onclick="toggleSavedInputs()" style="display: none">Toggle Saved
                    Inputs</button> -->
                <button id="clearSavedLinksBtn" onclick="clearRadioSelections()">Clear Saved Links</button>
            </div>
            <div class="check"><a
                    href="https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/language-masters/en-GB"
                    target="_blank">Wrong URL?</a> | <a href="https://www.grundfos.com/components" target="_blank">Brand
                    Components</a></div>
            <div id="savedCustomInputs" style="display: none"></div>
            <div id="searchContainer" style="display: none">
                <label for="searchInput">Search Language:</label>
                <input type="text" id="searchInput" placeholder="Search Language" oninput="handleInputSearch()" />
                <div id="masterLanguageInfo">Master Language:</div>
                <div id="localLanguagesInfo">Local Languages:</div>
                <button id="applySearchButton" onclick="applySearchInput()">Apply Search</button>
            </div>
            <div class="radio-group">
                <label>
                    <input type="checkbox" name="condition" value="radio1" checked />
                    Normal task</label>
                <label>
                    <input type="checkbox" name="condition" value="radio3" id="fragmentRadio" />
                    Fragment Reskin task
                </label>
                <label>
                    <input type="checkbox" name="condition" value="radio2" />
                    Tagging task (Unit)</label>
            </div>
            <div id="fragmentSection" class="hidden">
                <input type="text" id="fragmentInput" placeholder="Enter fragment" />
                <button id="addFragment">Add Fragment</button>
                <div id="savedFragmentsContainer">
                    <h4>Saved Fragments</h4>
                    <div id="savedFragments"></div>
                </div>
                <button id="clearFragments">Clear Saved Fragments</button>
                <button id="resetFragmentLinks">Reset Status Fragment Links</button>
            </div>
            <div id="buttons">
                <button id="toggleSearchButton" onclick="toggleSearchInput()">Show Search Input</button>
                <button id="openModalButton">Show Table</button>
            </div>
            <h3>Convert text</h3>
            <textarea id="inputText" rows="1" placeholder="Enter text here..." oninput="convertText()"></textarea>
        </div>
        <div class="column-right">
            <div id="links"></div>
            <div id="fragmentContainer"></div>
        </div>
    </div>
    <!-- Modal Container -->
    <div id="modal" class="modal">
        <!-- Modal Content -->
        <div class="modal-content">
            <span class="close-button" id="closeModalButton">x</span>
            <div class="table-container">
                <table border="1">
                    <thead>
                        <tr>
                            <th>Country</th>
                            <th>Grundfos domain</th>
                            <th>Sales Company</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Global</td>
                            <td>WWW</td>
                            <td>Global</td>
                        </tr>
                        <tr>
                            <td>United Kingdom</td>
                            <td>UK</td>
                            <td>GB</td>
                        </tr>
                        <tr>
                            <td>Ireland</td>
                            <td>IE</td>
                            <td>GPI</td>
                        </tr>
                        <tr>
                            <td>Denmark</td>
                            <td>DK</td>
                            <td>GDK</td>
                        </tr>
                        <tr>
                            <td>Norway</td>
                            <td>NO</td>
                            <td>GNO</td>
                        </tr>
                        <tr>
                            <td>Sweden</td>
                            <td>SE</td>
                            <td>GSV</td>
                        </tr>
                        <tr>
                            <td>Finland</td>
                            <td>FI</td>
                            <td>GSF</td>
                        </tr>
                        <tr>
                            <td>Germany</td>
                            <td>DE</td>
                            <td>GWS</td>
                        </tr>
                        <tr>
                            <td>Austria</td>
                            <td>AT</td>
                            <td>GPO</td>
                        </tr>
                        <tr>
                            <td>Schwitzerland</td>
                            <td>CH</td>
                            <td>GPS</td>
                        </tr>
                        <tr>
                            <td>Schwitzerland</td>
                            <td>CH/FR</td>
                            <td>GPS</td>
                        </tr>
                        <tr>
                            <td>France</td>
                            <td>FR</td>
                            <td>GFD</td>
                        </tr>
                        <tr>
                            <td>Belgium</td>
                            <td>BE/FR</td>
                            <td>GBL_FR</td>
                        </tr>
                        <tr>
                            <td>Belgium</td>
                            <td>BE</td>
                            <td>GBL_NL</td>
                        </tr>
                        <tr>
                            <td>Netherlands</td>
                            <td>NL</td>
                            <td>GNL</td>
                        </tr>
                        <tr>
                            <td>Spain</td>
                            <td>ES</td>
                            <td>BGE</td>
                        </tr>
                        <tr>
                            <td>Portugal</td>
                            <td>PT</td>
                            <td>BGP</td>
                        </tr>
                        <tr>
                            <td>Italy</td>
                            <td>IT</td>
                            <td>GIT</td>
                        </tr>
                        <tr>
                            <td>Greece</td>
                            <td>GR</td>
                            <td>GPH</td>
                        </tr>
                        <tr>
                            <td>Poland</td>
                            <td>PL</td>
                            <td>GPL</td>
                        </tr>
                        <tr>
                            <td>Czech republic</td>
                            <td>CZ</td>
                            <td>GCZ</td>
                        </tr>
                        <tr>
                            <td>Slovakia</td>
                            <td>SK</td>
                            <td>GSK</td>
                        </tr>
                        <tr>
                            <td>Latvia</td>
                            <td>LV</td>
                            <td>GLA_LV</td>
                        </tr>
                        <tr>
                            <td>Lithuania</td>
                            <td>LT</td>
                            <td>GLA_LT</td>
                        </tr>
                        <tr>
                            <td>Estonia</td>
                            <td>EE</td>
                            <td>GLA_EE</td>
                        </tr>
                        <tr>
                            <td>United Arab Emirates</td>
                            <td>AE</td>
                            <td>GGD</td>
                        </tr>
                        <tr>
                            <td>Saudi Arabia</td>
                            <td>SA</td>
                            <td>GSA</td>
                        </tr>
                        <tr>
                            <td>Egypt</td>
                            <td>EG</td>
                            <td>GEG</td>
                        </tr>
                        <tr>
                            <td>Turkey</td>
                            <td>TR</td>
                            <td>GTR</td>
                        </tr>
                        <tr>
                            <td>Serbia</td>
                            <td>RS</td>
                            <td>GSE</td>
                        </tr>
                        <tr>
                            <td>Albania</td>
                            <td>AL</td>
                            <td>GSE-AL</td>
                        </tr>
                        <tr>
                            <td>Bosnia Herzegovina</td>
                            <td>BA</td>
                            <td>GBH</td>
                        </tr>
                        <tr>
                            <td>Slovenia</td>
                            <td>SI</td>
                            <td>GSL</td>
                        </tr>
                        <tr>
                            <td>Ukraine</td>
                            <td>UA</td>
                            <td>GUA</td>
                        </tr>
                        <tr>
                            <td>Hungary</td>
                            <td>HU</td>
                            <td>GHU</td>
                        </tr>
                        <tr>
                            <td>Croatia</td>
                            <td>HR</td>
                            <td>GCR</td>
                        </tr>
                        <tr>
                            <td>Romania</td>
                            <td>RO</td>
                            <td>GRO</td>
                        </tr>
                        <tr>
                            <td>Bulgaria</td>
                            <td>BG</td>
                            <td>GBU</td>
                        </tr>
                        <tr>
                            <td>Kazakhstan</td>
                            <td>KZ</td>
                            <td>GKA</td>
                        </tr>
                        <tr>
                            <td>Russia</td>
                            <td>RU</td>
                            <td>GMO</td>
                        </tr>
                        <tr>
                            <td>Belarus</td>
                            <td>BY</td>
                            <td>GMO-BE</td>
                        </tr>
                        <tr>
                            <td>South Africa</td>
                            <td>ZA</td>
                            <td>GZA</td>
                        </tr>
                        <tr>
                            <td>Kenya</td>
                            <td>KE</td>
                            <td>GKE</td>
                        </tr>
                        <tr>
                            <td>Ghana</td>
                            <td>GH</td>
                            <td>GGH</td>
                        </tr>
                        <tr>
                            <td>Australia</td>
                            <td>AU</td>
                            <td>GPA</td>
                        </tr>
                        <tr>
                            <td>New Zealand</td>
                            <td>NZ</td>
                            <td>GNZ</td>
                        </tr>
                        <tr>
                            <td>South Korea</td>
                            <td>KR</td>
                            <td>GPK</td>
                        </tr>
                        <tr>
                            <td>Japan</td>
                            <td>JP</td>
                            <td>GJK</td>
                        </tr>
                        <tr>
                            <td>Philippines</td>
                            <td>PH</td>
                            <td>GPP</td>
                        </tr>
                        <tr>
                            <td>China</td>
                            <td>CH</td>
                            <td>GSH</td>
                        </tr>
                        <tr>
                            <td>Taiwan</td>
                            <td>TW</td>
                            <td>GTS</td>
                        </tr>
                        <tr>
                            <td>India</td>
                            <td>IN</td>
                            <td>GIN</td>
                        </tr>
                        <tr>
                            <td>Vietnam</td>
                            <td>VN</td>
                            <td>GPV</td>
                        </tr>
                        <tr>
                            <td>Thailand</td>
                            <td>TH</td>
                            <td>GTH</td>
                        </tr>
                        <tr>
                            <td>Malaysia</td>
                            <td>MY</td>
                            <td>GPM</td>
                        </tr>
                        <tr>
                            <td>Hong Kong</td>
                            <td>HK</td>
                            <td>GHK</td>
                        </tr>
                        <tr>
                            <td>Singapore</td>
                            <td>SG</td>
                            <td>GSI</td>
                        </tr>
                        <tr>
                            <td>Indonesia</td>
                            <td>ID</td>
                            <td>GAS</td>
                        </tr>
                        <tr>
                            <td>Argentina</td>
                            <td>AR</td>
                            <td>BGA</td>
                        </tr>
                        <tr>
                            <td>Brazil</td>
                            <td>BR</td>
                            <td>GBR</td>
                        </tr>
                        <tr>
                            <td>Chile</td>
                            <td>CL</td>
                            <td>BGC</td>
                        </tr>
                        <tr>
                            <td>Colombia</td>
                            <td>CO</td>
                            <td>GCO</td>
                        </tr>
                        <tr>
                            <td>Peru</td>
                            <td>-</td>
                            <td>GPE</td>
                        </tr>
                        <tr>
                            <td>United States</td>
                            <td>US</td>
                            <td>GPU</td>
                        </tr>
                        <tr>
                            <td>Canada</td>
                            <td>CA</td>
                            <td>GCA</td>
                        </tr>
                        <tr>
                            <td>Canada</td>
                            <td>CA/FR</td>
                            <td>GCA</td>
                        </tr>
                        <tr>
                            <td>Mexico</td>
                            <td>MX</td>
                            <td>GMX</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <script>
        const localLanguages = {
            "en-GB": ["en-GB", "ie/en", "gb/en", "my/en", "hk/en", "id/en", "ph/en", "in/en", "sg/en", "gh/en", "eg/en", "al/en", "sa/en", "ke/en", "ae/en", "za/en", "www/en"],
            "bs-BS": ["ba/bs"],
            "bg-BG": ["bg/bg"],
            "hr-HR": ["hr/hr"],
            "cs-CZ": ["cz/cs"],
            "da-DK": ["dk/da"],
            "et-EE": ["ee/et"],
            "fi-FI": ["fi/fi"],
            "el-GR": ["gr/el"],
            "hu-HU": ["hu/hu"],
            "it-IT": ["it/it"],
            "ja-JP": ["jp/ja"],
            "ko-KR": ["kr/ko"],
            "lv-LV": ["lv/lv"],
            "lt-LT": ["lt/lt"],
            "no-NO": ["no/no"],
            "pl-PL": ["pl/pl"],
            "ro-RO": ["ro/ro"],
            "ru-RU": ["ru/ru"],
            "sr-RS": ["rs/sr"],
            "sk-SK": ["sk/sk"],
            "sl-SI": ["si/sl"],
            "sv-SE": ["se/sv"],
            "th-TH": ["th/th"],
            "tr-TR": ["tr/tr"],
            "uk-UA": ["ua/uk"],
            "vi-VI": ["vn/vi"],
            "en-AU": ["en-AU", "au/en", "nz/en"],
            "en-US": ["en-US", "us/en", "ca/en"],
            "de-DE": ["de-DE", "de/de", "at/de", "ch/de"],
            "fr-FR": ["fr-FR", "fr/fr", "ca/fr", "ch/fr", "be/fr"],
            "pt-PT": ["pt-PT", "pt/pt", "br/pt"],
            "es-ES": ["es-ES", "es/es", "cl/es", "co/es", "ar/es", "mx/es"],
            "nl-NL": ["nl-NL", "nl/nl", "be/nl"],
            "ru-RU": ["ru-RU", "ru/ru", "by/ru", "kz/ru"],
            "zh-CN": ["zh-CN", "cn/zh", "tw/zh"],
        };
        const languageMapping = {
            Global: ["www/en"],
            GB: ["gb/en"],
            GSV: ["se/sv"],
            GDK: ["dk/da"],
            GNO: ["no/no"],
            GSF: ["fi/fi"],
            GWS: ["de/de"],
            GPO: ["at/de"],
            GPS_DE: ["ch/de"],
            GPS_FR: ["ch/fr"],
            GFD: ["fr/fr"],
            GBL_FR: ["be/fr"],
            GBL_NL: ["be/nl"],
            GNL: ["nl/nl"],
            BGE: ["es/es"],
            BGP: ["pt/pt"],
            GPH: ["gr/el"],
            GPL: ["pl/pl"],
            GCZ: ["cz/cs"],
            GSK: ["sk/sk"],
            GLA_LV: ["lv/lv"],
            GLA_LT: ["lt/lt"],
            GLA_EE: ["ee/et"],
            GGD: ["ae/en"],
            GSA: ["sa/en"],
            GEG: ["eg/en"],
            GTR: ["tr/tr"],
            GSE: ["rs/sr"],
            GSE_AL: ["al/en"],
            GBH: ["ba/bs"],
            GSL: ["si/sl"],
            GUA: ["ua/uk"],
            GHU: ["hu/hu"],
            GCR: ["hr/hr"],
            GRO: ["ro/ro"],
            GBU: ["bg/bg"],
            GKA: ["kz/ru"],
            GMO: ["ru/ru"],
            GMO_BE: ["by/ru"],
            GZA: ["za/en"],
            GKE: ["ke/en"],
            GGH: ["gh/en"],
            GPA: ["au/en"],
            GNZ: ["nz/en"],
            GPK: ["kr/ko"],
            GJK: ["jp/ja"],
            GPP: ["ph/en"],
            GSH: ["cn/zh"],
            GTS: ["tw/zh"],
            GIN: ["in/en"],
            GPV: ["vn/vi"],
            GTH: ["th/th"],
            GPM: ["my/en"],
            GHK: ["hk/en"],
            GSI: ["sg/en"],
            GAS: ["id/en"],
            BGA: ["ar/es"],
            GBR: ["br/pt"],
            BGC: ["cl/es"],
            GCO: ["co/es"],
            GPU: ["us/en"],
            GCA: ["ca/en"],
            GCA_FR: ["ca/fr"],
            GMX: ["mx/es"],
        };
        document.getElementById("generateAndSaveBtn").addEventListener("click", async function () {
            const customInput = document.getElementById("customInput").value.trim();
            if (!customInput) return;
            await generateLinks(); 
            processAndAddCustomInput();
            const container = document.getElementById("savedCustomInputs");
            container.style.display = "block";
            container.style.padding = "20px";
            container.style.backgroundColor = "#ffffff";
            container.style.marginBottom = "30px";
            container.style.width = "max-width";
        });
        window.clearRadioSelections = function () {
            const RadioSelections = document.getElementById("savedCustomInputs");
            RadioSelections.innerHTML = "";
            links.innerHTML = "";
            RadioSelections.style.display = "none";
            localStorage.removeItem("savedInputs");
            document.getElementById("clearSavedLinksBtn").style.display = "none";
            document.getElementById("toggleSaveButton").style.display = "none";
        };
        function processAndAddCustomInput() {
            let input = document.getElementById("customInput").value.trim();
            if (input !== lastGeneratedInput) {
                alert("Please generate links for this input before saving!");
                return;
            }
            let savedInputs = JSON.parse(localStorage.getItem("savedInputs")) || [];
            if (savedInputs.includes(input)) {
                return;
            }
            if (input) {
                savedInputs.push(input);
                localStorage.setItem("savedInputs", JSON.stringify(savedInputs));
                const container = document.getElementById("savedCustomInputs");
                const div = document.createElement("div");
                div.innerHTML = `<input type="radio" name="savedInput" onchange="updateCustomInput(this)" value="${input}" checked /> ${input}`;
                container.appendChild(div);
                document.getElementById("customInput").value = input;
                masterLanguage.disabled = false;
                document.getElementById("clearSavedLinksBtn").style.display = "block";
                document.getElementById("toggleSaveButton").style.display = "block";
            }
        }
        let lastGeneratedInput = ""; 
        function updateCustomInput(radio) {
            const input = document.getElementById("customInput");
            input.value = radio.value;
            if (input.value !== lastGeneratedInput) {
                generateLinks(); 
            }
            setTimeout(() => {
                if (radio.value !== input.value) {
                    radio.value = input.value;
                }
            }, 0);
            let savedInputs = JSON.parse(localStorage.getItem("savedInputs")) || [];
            const index = savedInputs.indexOf(radio.value);
            if (index === -1) {
                savedInputs.push(radio.value); 
            } else {
                savedInputs[index] = radio.value; 
            }
            localStorage.setItem("savedInputs", JSON.stringify(savedInputs));
        }
        function generateLinksFromInput(input) {
            return input.split("?")[0];
        }
        window.onload = function () {
            const savedInputs = JSON.parse(localStorage.getItem("savedInputs")) || [];
            const masterLanguage = document.getElementById("masterLanguage");
            const clearBtn = document.getElementById("clearSavedLinksBtn");
            if (savedInputs.length > 0) {
                masterLanguage.disabled = false;
            } else {
                masterLanguage.disabled = true;
            }
            if (savedInputs.length > 0) {
                const container = document.getElementById("savedCustomInputs");
                savedInputs.forEach((input) => {
                    const processedInput = generateLinksFromInput(input);
                    const div = document.createElement("div");
                    div.innerHTML = `<input type="radio" name="savedInput" onchange="updateCustomInput(this)" value="${processedInput}" /> ${processedInput}`;
                    container.appendChild(div);
                });
                document.getElementById("customInput").value = savedInputs[savedInputs.length - 1];
                generateLinks();
                clearBtn.style.display = "block";
                document.getElementById("toggleSaveButton").style.display = "block";
            } else {
                clearBtn.style.display = "none";
                document.getElementById("toggleSaveButton").style.display = "none";
            }
        };
        document.addEventListener("DOMContentLoaded", function () {
            const masterCodes = Object.keys(localLanguages);
            const masterSelectionButton = document.createElement("button");
            masterSelectionButton.textContent = "Select Master Code";
            masterSelectionButton.onclick = showMasterCodePopup;
            document.getElementById("buttons").appendChild(masterSelectionButton);
            const columnLeft = document.querySelector(".column-left");
            let popup = document.createElement("div");
            popup.id = "masterCodePopup";
            popup.className = "popup-content";
            popup.style.display = "none";
            popup.innerHTML = `
        <h3>Select Master Language</h3>
        <input type="text" id="masterCodeInput" placeholder="Enter master codes (comma separated)" />
        <div id="masterCheckboxContainer" style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 25px;"></div>
        <button onclick="generateMasterCheckboxes()">Submit</button>
        <button onclick="clearMasterSelections()">Clear</button>
    `;
            columnLeft.appendChild(popup);
            function showMasterCodePopup() {
                if (popup.style.display === "none") {
                    popup.style.display = "block";
                } else {
                    popup.style.display = "none";
                }
            }
            window.generateMasterCheckboxes = function () {
                const inputElement = document.getElementById("masterCodeInput");
                let input = inputElement.value;
                const codes = input
                    .split(",")
                    .map((code) =>
                        code
                            .trim()
                            .toLowerCase()
                            .replace(/([a-zA-Z]{2})-([a-zA-Z]{2})/, (match, p1, p2) => `${p1.toLowerCase()}-${p2.toUpperCase()}`)
                    )
                    .filter((code) => masterCodes.includes(code));
                const container = document.getElementById("masterCheckboxContainer");
                let firstCheckbox = null;
                codes.forEach((code, index) => {
                    if (!document.querySelector(`#masterCheckboxContainer input[value='${code}']`)) {
                        const checkboxWrapper = document.createElement("div");
                        checkboxWrapper.style.display = "flex";
                        checkboxWrapper.style.alignItems = "center";
                        checkboxWrapper.style.marginBottom = "25px";
                        const checkbox = document.createElement("input");
                        checkbox.type = "checkbox";
                        checkbox.value = code;
                        checkbox.onchange = updateMasterSelection;
                        const label = document.createElement("label");
                        label.textContent = code;
                        label.style.marginLeft = "5px";
                        checkboxWrapper.appendChild(checkbox);
                        checkboxWrapper.appendChild(label);
                        container.appendChild(checkboxWrapper);
                        if (firstCheckbox === null) {
                            firstCheckbox = checkbox;
                        }
                    }
                });
                if (firstCheckbox) {
                    firstCheckbox.checked = true;
                    updateMasterSelection();
                }
                inputElement.value = "";
            };
            function updateMasterSelection() {
                const selectedCodes = Array.from(document.querySelectorAll("#masterCheckboxContainer input:checked")).map((input) => input.value);
                if (selectedCodes.length > 0) {
                    document.getElementById("masterLanguage").value = selectedCodes[0];
                    updateLocalLanguages();
                }
            }
            window.clearMasterSelections = function () {
                const container = document.getElementById("masterCheckboxContainer");
                container.innerHTML = "";
            };
        });
        document.getElementById("customInput").addEventListener("input", function () {
    let inputValue = this.value;
    if (inputValue.startsWith("/")) {
        inputValue = inputValue.substring(1);
    }
    const baseUrls = [
        "https://author-grundfos-prod-65.adobecqms.net/",
        "https://www.grundfos.com/",
        "https://product-selection.grundfos.com/"
    ];
    const customUrl = "https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/language-masters/en-GB/";
    let isValid = baseUrls.some(url => inputValue.startsWith(url));
    let finalUrl = isValid || inputValue.startsWith(customUrl)
        ? inputValue
        : customUrl + inputValue;
    console.log("Final URL:", finalUrl);
});
        const openModalButton = document.getElementById("openModalButton");
        const modal = document.getElementById("modal");
        const closeModalButton = document.getElementById("closeModalButton");
        openModalButton.onclick = function () {
            modal.style.display = "block";
        };
        closeModalButton.onclick = function () {
            modal.style.display = "none";
        };
        window.onclick = function (event) {
            if (event.target === modal) {
                modal.style.display = "none";
            }
        };
        function toggleSearchInput() {
            const searchContainer = document.getElementById("searchContainer");
            const button = document.getElementById("toggleSearchButton");
            if (searchContainer.style.display === "none") {
                searchContainer.style.display = "block";
                button.textContent = "Hide Search Input";
            } else {
                searchContainer.style.display = "none";
                button.textContent = "Show Search Input";
            }
        }
        function handleInputSearch() {
            const searchInput = document.getElementById("searchInput").value.toUpperCase().trim();
            document.getElementById("masterLanguageInfo").textContent = "Master Language: ";
            document.getElementById("localLanguagesInfo").textContent = "Local Languages: ";
            if (languageMapping[searchInput]) {
                const localLang = languageMapping[searchInput][0];
                let found = false;
                for (const masterLang in localLanguages) {
                    if (localLanguages[masterLang].includes(localLang)) {
                        document.getElementById("masterLanguageInfo").textContent = "Master Language: " + masterLang;
                        document.getElementById("localLanguagesInfo").textContent = "Local Languages: " + localLang;
                        found = true;
                        break;
                    }
                }
                if (!found) {
                    document.getElementById("masterLanguageInfo").textContent = "Master Language: Not Found";
                    document.getElementById("localLanguagesInfo").textContent = "Local Languages: Not Found";
                }
            } else {
                document.getElementById("masterLanguageInfo").textContent = "Master Language: Not Found";
                document.getElementById("localLanguagesInfo").textContent = "Local Languages: Not Found";
            }
        }
let floatBtn = document.createElement("div");
floatBtn.id = "floatingSavedBtn";
floatBtn.innerHTML = "ðŸ’¾"; 
floatBtn.onclick = function () {
    const savedBox = document.getElementById("savedCustomInputs");
    savedBox.style.display = savedBox.style.display === "block" ? "none" : "block";
};
document.body.appendChild(floatBtn);
const savedBox = document.getElementById("savedCustomInputs");
savedBox.style.position = "fixed";
savedBox.style.bottom = "100px";
savedBox.style.left = "20px";
savedBox.style.width = "300px";
savedBox.style.maxHeight = "300px";
savedBox.style.overflowY = "auto";
savedBox.style.background = "#fff";
savedBox.style.boxShadow = "0 4px 12px rgba(0,0,0,0.2)";
savedBox.style.borderRadius = "12px";
savedBox.style.padding = "15px";
savedBox.style.zIndex = "999";
        function applySearchInput() {
            const searchInput = document.getElementById("searchInput").value.toUpperCase().trim();
            const customInput = document.getElementById("customInput").value.trim();
            if (!customInput) {
                alert("Please enter data into the customInput before proceeding.");
                return;
            }
            if (!searchInput) alert("Please enter data into the Search Language before proceeding.");
            {
                return;
            }
            if (languageMapping[searchInput]) {
                const localLang = languageMapping[searchInput][0];
                let found = false;
                for (const masterLang in localLanguages) {
                    if (localLanguages[masterLang].includes(localLang)) {
                        const masterSelect = document.getElementById("masterLanguage");
                        const options = masterSelect.getElementsByTagName("option");
                        for (let option of options) {
                            if (option.value === masterLang) {
                                option.selected = true;
                                break;
                            }
                        }
                        updateLocalLanguages1(localLanguages[masterLang]);
                        const localCheckboxToSelect = document.querySelector(`#localLanguages input[type="checkbox"][value="${localLang}"]`);
                        if (localCheckboxToSelect) {
                            localCheckboxToSelect.checked = true;
                        }
                        generateLinks();
                        found = true;
                        break;
                    }
                }
                if (!found) {
                    document.getElementById("masterLanguage").selectedIndex = 0;
                    document.getElementById("localLanguages").innerHTML = "";
                    const localCheckboxes = document.querySelectorAll('#localLanguages input[type="checkbox"]');
                    localCheckboxes.forEach((checkbox) => (checkbox.checked = false));
                }
            } else {
                document.getElementById("masterLanguage").selectedIndex = 0;
                document.getElementById("localLanguages").innerHTML = "";
                const localCheckboxes = document.querySelectorAll('#localLanguages input[type="checkbox"]');
                localCheckboxes.forEach((checkbox) => (checkbox.checked = false));
            }
        }
        function generateLanguageSuggestions() {
            const inputURL = document.getElementById("customInput").value.trim();
            const masterSelect = document.getElementById("masterLanguage");
            if (!inputURL) {
                alert("Please provide a valid URL.");
                return;
            }
            const languagePattern = /https:\/\/(?:www|product-selection)\.grundfos\.com\/([a-z]{2})\//;
            const languageMastersPattern = /.*?\/content\/grundfos\/language-masters\/([a-z]{2}-[A-Z]{2})/;
            const nonLanguageMastersPattern = /.*?\/content\/grundfos\/([a-z]{2})\/([a-z]{2})\//;
            let languageCode = null;
            const matchLanguage = inputURL.match(languagePattern);
            if (matchLanguage) {
                languageCode = matchLanguage[1];
            } else if (inputURL.match(languageMastersPattern)) {
                const matchLanguageMasters = inputURL.match(languageMastersPattern);
                languageCode = matchLanguageMasters[1];
                if (languageCode) {
                    masterSelect.value = languageCode;
                    updateLocalLanguages([]);
                    return;
                }
            } else {
                const matchNonLanguageMasters = inputURL.match(nonLanguageMastersPattern);
                if (matchNonLanguageMasters) {
                    const countryCode = matchNonLanguageMasters[1];
                    const languageCodeSuffix = matchNonLanguageMasters[2];
                    for (const [master, locals] of Object.entries(localLanguages)) {
                        const languageCode = `${countryCode}/${languageCodeSuffix}`;
                        if (locals.includes(languageCode)) {
                            masterSelect.value = master;
                            updateLocalLanguages([]);
                            return;
                        }
                    }
                } else {
                    languageCode = "www/en";
                    masterSelect.value = "en-GB";
                    updateLocalLanguages([]);
                }
            }
            if (!languageCode) {
                alert("KhÃ´ng tÃ¬m tháº¥y mÃ£ ngÃ´n ngá»¯ trong URL!");
                return;
            }
            let matchedLocals = [];
            let fullMatchFound = false;
            for (const [master, locals] of Object.entries(localLanguages)) {
                const localMatches = locals.filter((local) => local.startsWith(languageCode + "/"));
                if (localMatches.length > 0) {
                    matchedLocals = matchedLocals.concat(localMatches);
                }
            }
            let prioritizedLocals = matchedLocals.filter((local) => local === `${languageCode}/${languageCode}`);
            if (prioritizedLocals.length === 0) {
                prioritizedLocals = matchedLocals.sort((a, b) => {
                    if (a.includes("/nl") && !b.includes("/nl")) return -1;
                    if (a.includes("/fr") && !b.includes("/fr")) return -1;
                    return 0;
                });
            }
            let prioritizedMasters = [];
            for (let i = 0; i < prioritizedLocals.length; i++) {
                const local = prioritizedLocals[i];
                for (const [master, locals] of Object.entries(localLanguages)) {
                    if (locals.includes(local)) {
                        if (!prioritizedMasters.includes(master)) {
                            prioritizedMasters.push(master);
                        }
                        break;
                    }
                }
            }
            let sortedMasters = prioritizedMasters.sort((a, b) => {
                if (a === "nl-NL" && b !== "nl-NL") return -1;
                if (b === "nl-NL" && a !== "nl-NL") return 1;
                if (a === "en-US" && b !== "en-US") return -1;
                if (b === "en-US" && a !== "en-US") return 1;
                if (a === "de-DE" && b !== "de-DE") return -1;
                if (b === "de-DE" && a !== "de-DE") return 1;
                if (a === "fr-FR" && b !== "fr-FR") return -1;
                if (b === "fr-FR" && a !== "fr-FR") return 1;
                return 0;
            });
            if (prioritizedMasters.length > 0) {
                const selectedMaster = sortedMasters[0];
                masterSelect.value = selectedMaster;
                updateLocalLanguages(prioritizedLocals);
                generateLinksForCondition3();
                generateLinks();
            }
        }
        function updateLocalLanguages() {
            const masterLanguage = document.getElementById("masterLanguage").value;
            const localLanguagesDiv = document.getElementById("localLanguages");
            localLanguagesDiv.innerHTML = "";
            if (localLanguages[masterLanguage]) {
                localLanguages[masterLanguage].forEach((code, index) => {
                    const checkbox = document.createElement("input");
                    checkbox.type = "checkbox";
                    checkbox.id = code;
                    checkbox.value = code;
                    checkbox.onchange = handleLocalLanguageChange;
                    const label = document.createElement("label");
                    label.setAttribute("for", code);
                    label.textContent = code;
                    localLanguagesDiv.appendChild(checkbox);
                    localLanguagesDiv.appendChild(label);
                    localLanguagesDiv.appendChild(document.createElement("br"));
                    if (index === 0) {
                        checkbox.checked = true;
                        checkbox.dispatchEvent(new Event("change"));
                        checkbox.disabled = false;
                    } else {
                        checkbox.disabled = true;
                        checkbox.dispatchEvent(new Event("change"));
                    }
                });
            }
            applyDisabledStyles();
        }
        function updateLocalLanguages1() {
            const masterLanguage = document.getElementById("masterLanguage").value;
            const localLanguagesDiv = document.getElementById("localLanguages");
            localLanguagesDiv.innerHTML = "";
            if (localLanguages[masterLanguage]) {
                localLanguages[masterLanguage].forEach((code, index) => {
                    const checkbox = document.createElement("input");
                    checkbox.type = "checkbox";
                    checkbox.id = code;
                    checkbox.value = code;
                    checkbox.onchange = handleLocalLanguageChange;
                    const label = document.createElement("label");
                    label.setAttribute("for", code);
                    label.textContent = code;
                    localLanguagesDiv.appendChild(checkbox);
                    localLanguagesDiv.appendChild(label);
                    localLanguagesDiv.appendChild(document.createElement("br"));
                });
            }
            applyDisabledStyles();
        }
        function applyDisabledStyles() {
            const checkboxes = document.querySelectorAll('#localLanguages input[type="checkbox"]');
            checkboxes.forEach((checkbox) => {
                const label = checkbox.nextElementSibling;
                if (checkbox.disabled) {
                    label.style.opacity = "0.5";
                    label.style.pointerEvents = "none";
                } else {
                    label.style.opacity = "1";
                    label.style.pointerEvents = "auto";
                }
            });
        }
        function handleLocalLanguageChange() {
            const checkboxes = document.querySelectorAll('#localLanguages input[type="checkbox"]');
            const firstCheckbox = checkboxes[0];
            if (firstCheckbox.checked) {
                checkboxes.forEach((checkbox, index) => {
                    if (index > 0) {
                        checkbox.disabled = true;
                        checkbox.checked = false;
                    }
                });
            } else {
                checkboxes.forEach((checkbox, index) => {
                    if (index > 0) {
                        checkbox.disabled = false;
                    }
                });
            }
            applyDisabledStyles();
            const selectedLocalLanguages = Array.from(document.querySelectorAll('#localLanguages input[type="checkbox"]:checked')).map((checkbox) => checkbox.value);
            currentLocalLanguages = selectedLocalLanguages;
            generateLinksForCondition3();
            generateLinks();
        }
        function removeDuplicateLinks(linksDiv) {
            const linkElements = linksDiv.querySelectorAll("p a");
            const seenURLs = new Set();
            const paragraphs = Array.from(linksDiv.getElementsByTagName("p")).sort((a, b) => {
                const textA = a.textContent.trim().toLowerCase();
                const textB = b.textContent.trim().toLowerCase();
            });
            paragraphs.forEach((p) => linksDiv.appendChild(p));
            linkElements.forEach((linkElement) => {
                const url = linkElement.href.trim();
                if (seenURLs.has(url)) {
                    const parentParagraph = linkElement.closest("p");
                    if (parentParagraph) {
                        parentParagraph.remove();
                    }
                } else {
                    seenURLs.add(url);
                }
            });
        }
        function generateLinks() {
            const masterLanguage = document.getElementById("masterLanguage").value;
            const localLanguagesDiv = document.getElementById("localLanguages");
            const customInput = document.getElementById("customInput").value;
            const fragmentInput = document.getElementById("fragmentInput").value;
            const linksDiv = document.getElementById("links");
            linksDiv.innerHTML = "";
            const checkboxes = document.querySelectorAll('#localLanguages input[type="checkbox"]:checked');
            const localLanguagesChecked = Array.from(checkboxes).map((checkbox) => checkbox.value);
            const condition = document.querySelector('input[name="condition"]:checked').value;
            let result = "";
            let baseUrl = customInput;
            let alreadyHandled = false;
            const mappings = [
                {
                    old: "products",
                    new: "solutions",
                },
                {
                    old: "learn",
                    new: "solutions/learn",
                },
                {
                    old: "support",
                    new: "solutions/support",
                },
                {
                    old: "about-us/sustainability",
                    new: "sustainability",
                },
                {
                    old: "about-us/media",
                    new: "media",
                },
                {
                    old: "about-us/careers",
                    new: "careers",
                },
            ];
            if (!baseUrl || baseUrl.trim() === "") {
            } else {
                const questionMarkIndex = baseUrl.indexOf("?");
                if (questionMarkIndex !== -1) {
                    baseUrl = baseUrl.substring(0, questionMarkIndex);
                }
                const languageMastersIndex = baseUrl.indexOf("language-masters/");
                if (languageMastersIndex !== -1) {
                    baseUrl = baseUrl.substring(languageMastersIndex + "language-masters/".length);
                    const firstSlashIndex = baseUrl.indexOf("/");
                    if (firstSlashIndex !== -1) {
                        result = baseUrl.substring(firstSlashIndex + 1);
                    } else {
                        result = baseUrl;
                    }
                    alreadyHandled = true;
                    if (result.endsWith(".html")) {
                        result = result.slice(0, -5);
                    }
                    if (result.endsWith("/")) {
                        result = result.slice(0, -1);
                    }
                }
                else if (!alreadyHandled && baseUrl.includes("grundfos/")) {
                    const grundfosMatch = baseUrl.match(/^.*grundfos\/([^/]+\/[^/]+\/.*)/);
                    if (grundfosMatch) {
                        result = grundfosMatch[1];
                    } else {
                        result = baseUrl;
                    }
                    if (result.includes("www/en")) {
                        mappings.forEach((mapping) => {
                            if (result.includes("solutions/learn/") && mapping.old === "products" && mapping.new === "solutions") {
                                return;
                            }
                            if (result.includes(mapping.old)) {
                                result = result.replace(mapping.old, mapping.new);
                            }
                        });
                    } else {
                        mappings.forEach((mapping) => {
                            if (result.includes("solutions/learn/") && mapping.new === "solutions" && mapping.old === "products") {
                                return;
                            }
                            if (result.includes(mapping.new)) {
                                result = result.replace(mapping.new, mapping.old);
                            }
                        });
                    }
                    if (result.endsWith(".html")) {
                        result = result.slice(0, -5);
                    }
                    if (result.endsWith("/")) {
                        result = result.slice(0, -1);
                    }
                }
                else if (baseUrl.match(/https:\/\/www\.grundfos\.com\/([a-z]{2})\//) || baseUrl.match(/https:\/\/product-selection\.grundfos\.com\/([a-z]{2})\//)) {
                    const regionPattern = /(https:\/\/(?:www|product-selection)\.grundfos\.com\/)([a-z]{2})\//;
                    const match = baseUrl.match(regionPattern);
                    if (match) {
                        const regionCode = match[2];
                        const regionIndex = baseUrl.indexOf(regionCode) + regionCode.length + 1;
                        result = baseUrl.substring(regionIndex);
                        if (baseUrl.includes("product-selection.grundfos.com/")) {
                            result = "products/" + result;
                        }
                    }
                } else {
                    let baseIndex = baseUrl.indexOf("www.grundfos.com/") !== -1 ? baseUrl.indexOf("www.grundfos.com/") : baseUrl.indexOf("product-selection.grundfos.com/");
                    if (baseIndex !== -1) {
                        baseUrl = baseUrl.substring(baseIndex + (baseUrl.indexOf("www.grundfos.com/") !== -1 ? "www.grundfos.com/".length : "product-selection.grundfos.com/".length));
                        result = baseUrl;
                    }
                    if (baseUrl.startsWith("product-selection.grundfos.com/")) {
                        result = "products/" + result;
                    }
                    if (result.endsWith(".html")) {
                        result = result.slice(0, -5);
                    }
                    if (result.endsWith("/")) {
                        result = result.slice(0, -1);
                    }
                    if (!baseUrl.match(/https:\/\/www\.grundfos\.com\//) && !baseUrl.match(/https:\/\/product-selection\.grundfos\.com\//)) {
                        result = baseUrl;
                    }
                }
                document.getElementById("customInput").value = result;
            }
            if (condition === "radio1") {
                generateLinksForCondition1(masterLanguage, localLanguagesChecked, result, linksDiv);
            } else if (condition === "radio2") {
                generateLinksForCondition2(masterLanguage, localLanguagesChecked, result, linksDiv);
            } else if (condition === "radio3") {
                generateLinksForCondition3();
            } else if (condition === "radio4") {
                generateLinksForCondition4(masterLanguage, localLanguagesChecked, fragmentInput, linksDiv);
            }
            let inputField = document.getElementById("customInput");
            if (inputField.value.trim() === "") {
                alert("Please enter a valid input before generating links!");
                return;
            }
            const lastInput = inputField.value.trim(); 
            document.getElementById("customInput").value = result;
            lastGeneratedInput = inputField.value.trim();
            console.log("Generated input:", lastGeneratedInput);
        }
        function generateAdditionalLinks(masterLanguage, localLanguage, customInput, localLanguages, liveSiteLanguage, linksDiv) {
            let linksHTML = "";
            let result = "";
            let baseUrl = customInput;
            if (typeof customInput !== "string") {
                return;
            }
            const questionMarkIndex = customInput.indexOf("?");
            if (questionMarkIndex !== -1) {
                baseUrl = customInput.substring(0, questionMarkIndex);
            }
            const baseIndex = baseUrl.indexOf("language-masters/");
            if (baseIndex !== -1) {
                baseUrl = baseUrl.substring(baseIndex + "language-masters/".length);
                const firstSlashIndex = baseUrl.indexOf("/");
                if (firstSlashIndex !== -1) {
                    result = baseUrl.substring(firstSlashIndex + 1);
                } else {
                    result = baseUrl;
                }
                if (result.endsWith(".html")) {
                    result = result.slice(0, -5);
                }
                if (result.endsWith("/")) {
                    result = result.slice(0, -1);
                }
            }
            const replacements = [
                {
                    old: "products",
                    new: "solutions",
                },
                {
                    old: "learn",
                    new: "solutions/learn",
                },
                {
                    old: "support",
                    new: "solutions/support",
                },
                {
                    old: "about-us/sustainability",
                    new: "sustainability",
                },
                {
                    old: "about-us/media",
                    new: "media",
                },
                {
                    old: "about-us/careers",
                    new: "careers",
                },
            ];
            const linkMapping = {
                "products/industries": "https://www.grundfos.com/solutions/industries",
                "products/applications": "https://product-selection.grundfos.com/applications",
                "products/categories": "https://product-selection.grundfos.com/categories",
                "products/pumped-liquid-guide": "https://product-selection.grundfos.com/pumped-liquid-guide",
                "products/products": "https://product-selection.grundfos.com/products",
                products: "https://product-selection.grundfos.com/",
                "solutions/learn": "https://www.grundfos.com/solutions/learn",
                support: "https://www.grundfos.com/solutions/support",
                "about-us/sustainability": "https://www.grundfos.com/sustainability",
                "about-us/media": "https://www.grundfos.com/media",
                "about-us/careers": "https://www.grundfos.com/careers",
            };
            if (!baseUrl || baseUrl === "undefined") {
                return;
            }
            let linkBase = baseUrl;
            const checkboxes = document.querySelectorAll('#localLanguages input[type="checkbox"]:checked');
            const localLanguagesChecked = Array.from(checkboxes).map((checkbox) => checkbox.value);
            if (!Array.isArray(localLanguagesChecked)) {
                localLanguagesChecked = [];
            }
            const localLanguagesList = localLanguages[masterLanguage] || [];
            if (localLanguagesChecked.includes(masterLanguage)) {
                const remainingLanguages = localLanguagesList.filter((lang) => lang !== masterLanguage);
                let masterLanguageExists = false;
                let localLanguageExists = false;
                linksDiv.querySelectorAll("p").forEach((p) => {
                    if (p.querySelector("strong") && p.querySelector("strong").textContent.includes(`Master Language Selected (${masterLanguage})`)) {
                        masterLanguageExists = true;
                    }
                });
                if (!masterLanguageExists) {
                    if (remainingLanguages.length > 0) {
                        linksHTML += `<p><br><br><strong>Master Language Selected (${masterLanguage}):</strong> ${remainingLanguages.join(", ")}</p>`;
                    } else {
                        linksHTML += `<p><strong>Master Language Selected (${masterLanguage}):</strong> No additional locales available to display.</p>`;
                    }
                }
                remainingLanguages.forEach((language) => {
                    const localLinkEditorLocal = `https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/${language}/${linkBase}`;
                    const localLinkSitesLocal = `https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/${language}/${linkBase}`;
                    const localLinkDisabledLocal = `https://author-grundfos-prod-65.adobecqms.net/content/grundfos/${language}/${linkBase}?wcmmode=disabled`;
                    linksDiv.querySelectorAll("p").forEach((p) => {
                        if (p.querySelector("strong") && p.querySelector("strong").textContent.includes(`Local Language (${language})`)) {
                            localLanguageExists = true;
                        }
                    });
                    if (!localLanguageExists) {
                        linksHTML += `<p><strong>Local Language (${language}):</strong></p>`;
                    }
                    if (language === "www/en") {
                        let liveSiteLink = `https://www.grundfos.com/${baseUrl}`.replace(/\/{2,}/g, "/");
                        let modifiedLinkBase = linkBase;
                        replacements.forEach((replacement) => {
                            if (modifiedLinkBase.includes(replacement.old)) {
                                modifiedLinkBase = modifiedLinkBase.replace(replacement.old, replacement.new);
                            }
                        });
                        linksHTML += `<p>Site Live: <a href="https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/www/en/${modifiedLinkBase}" target="_blank">https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/www/en/${modifiedLinkBase}</a></p>
                                    <p>Editor: <a href="https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/www/en/${modifiedLinkBase}" target="_blank">https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/www/en/${modifiedLinkBase}</a></p>
                                    <p>Preview: <a href="https://author-grundfos-prod-65.adobecqms.net/content/grundfos/www/en/${modifiedLinkBase}?wcmmode=disabled" target="_blank">https://author-grundfos-prod-65.adobecqms.net/content/grundfos/www/en/${modifiedLinkBase}?wcmmode=disabled</a></p>`;
                        const originalLinkBase = linkBase;
                        let finalLink = null;
                        for (let key in linkMapping) {
                            if (linkMapping.hasOwnProperty(key) && originalLinkBase.includes(key)) {
                                finalLink = originalLinkBase.replace(key, linkMapping[key]);
                                break;
                            }
                        }
                        if (!finalLink) {
                            finalLink = `https://www.grundfos.com/${originalLinkBase}`;
                        }
                        linksHTML += `<p>Live Site Link: <a href="${finalLink}" target="_blank">${finalLink}</a></p>`;
                    } else {
                        let modifiedLinkBase = linkBase;
                        const localePrefix = language.split("/")[0];
                        const localeSuffix = language.split("/")[1];
                        const liveLink = `https://www.grundfos.com/${language.split("/")[0]}/${baseUrl}`;
                        let newLink = `https://www.grundfos.com/${baseUrl}`;
                        if (["ch/fr", "be/fr", "ca/fr"].includes(language)) {
                            newLink = `https://www.grundfos.com/${language}/${baseUrl}`;
                        } else {
                            newLink = `https://www.grundfos.com/${localePrefix}/${baseUrl}`;
                        }
                        if (newLink.includes("/products")) {
                            let originalLink = newLink;
                            if (originalLink.includes("https://www.grundfos.com/")) {
                                newLink = originalLink.replace("https://www.grundfos.com/", "https://product-selection.grundfos.com/").replace("/products", "");
                            }
                            if (originalLink.includes("https://www.grundfos.com/cn/")) {
                                newLink = originalLink.replace("https://www.grundfos.com/cn/", "https://product-selection.grundfos.cn/").replace("/products", "");
                            }
                            newLink = newLink.replace("/www/", "/");
                            newLink = newLink.replace("/gb/", "/uk/");
                            linksHTML += `<p>Site Live: <a href="${localLinkSitesLocal}" target="_blank">${localLinkSitesLocal}</a></p>`;
                            linksHTML += `<p>Editor: <a href="${localLinkEditorLocal}" target="_blank">${localLinkEditorLocal}</a></p>`;
                            linksHTML += `<p>Preview: <a href="${localLinkDisabledLocal}" target="_blank">${localLinkDisabledLocal}</a></p>`;
                            linksHTML += `<p>Live Site Link: <a href="${newLink}" target="_blank">${newLink}</a><br></p>`;
                        } else if (newLink.includes("solutions/learn")) {
                            newLink = newLink.replace("solutions/learn", "learn");
                            let updatedLinkBase = linkBase;
                            updatedLinkBase = updatedLinkBase.replace("solutions/learn", "learn");
                            linksHTML += `<p>Site Live: <a href="https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/${language}/${updatedLinkBase}" target="_blank">https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/${language}/${updatedLinkBase}</a></p>
                                    <p>Editor: <a href="https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/${language}/${updatedLinkBase}" target="_blank">https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/${language}/${updatedLinkBase}</a></p>
                                    <p>Preview: <a href="https://author-grundfos-prod-65.adobecqms.net/content/grundfos/${language}/${updatedLinkBase}?wcmmode=disabled" target="_blank">https://author-grundfos-prod-65.adobecqms.net/content/grundfos/${language}/${updatedLinkBase}?wcmmode=disabled</a></p>`;
                            linksHTML += `<p>Live Site Link: <a href="${newLink}" target="_blank">${newLink}</a><br></p>`;
                        } else {
                            let originalLink = newLink;
                            if (originalLink.includes("https://www.grundfos.com/cn/")) {
                                newLink = originalLink.replace("https://www.grundfos.com/cn/", "Https://www.grundfos.cn/").replace("/products", "");
                            }
                            newLink = newLink.replace("/www/", "/");
                            newLink = newLink.replace("/gb/", "/uk/");
                            linksHTML += `<p>Site Live: <a href="https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/${language}/${modifiedLinkBase}" target="_blank">https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/${language}/${modifiedLinkBase}</a></p>
                                    <p>Editor: <a href="https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/${language}/${modifiedLinkBase}" target="_blank">https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/${language}/${modifiedLinkBase}</a></p>
                                    <p>Preview: <a href="https://author-grundfos-prod-65.adobecqms.net/content/grundfos/${language}/${modifiedLinkBase}?wcmmode=disabled" target="_blank">https://author-grundfos-prod-65.adobecqms.net/content/grundfos/${language}/${modifiedLinkBase}?wcmmode=disabled</a></p>`;
                            linksHTML += `<p>Live Site Link: <a href="${newLink}" target="_blank">${newLink}</a><br></p>`;
                        }
                    }
                });
            } else if (localLanguagesChecked.length > 0) {
                let addedSelectedLanguages = false;
                const selectedLanguagesCount = Array.from(linksDiv.querySelectorAll("p")).filter((p) => p.innerHTML.includes("Selected Local Languages:")).length;
                if (selectedLanguagesCount === 0) {
                    const selectedLanguagesText = `<p><strong><br><br>Selected Local Languages:</strong> ${localLanguagesChecked.join(", ")}</p>`;
                    linksHTML += selectedLanguagesText;
                }
                linksDiv.querySelectorAll("p").forEach((p) => {
                    if (p.querySelector("strong") && p.querySelector("strong").textContent.includes(`Selected Local Languages:</strong> ${localLanguagesChecked.join(", ")}`)) {
                        localLanguageExists = true;
                    }
                });
                localLanguagesChecked.forEach((selectedLocalLanguage) => {
                    const localLinkEditorLocal = `https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/${selectedLocalLanguage}/${linkBase}`;
                    const localLinkSitesLocal = `https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/${selectedLocalLanguage}/${linkBase}`;
                    const localLinkDisabledLocal = `https://author-grundfos-prod-65.adobecqms.net/content/grundfos/${selectedLocalLanguage}/${linkBase}?wcmmode=disabled`;
                    let localLanguageExists = false;
                    linksDiv.querySelectorAll("p").forEach((p) => {
                        if (p.querySelector("strong") && p.querySelector("strong").textContent.includes(`Local Language (${selectedLocalLanguage})`)) {
                            localLanguageExists = true;
                        }
                    });
                    if (!localLanguageExists) {
                        linksHTML += `<p><strong>Local Language (${selectedLocalLanguage}):</strong></p>`;
                    }
                    if (selectedLocalLanguage === "www/en") {
                        let liveSiteLink = `https://www.grundfos.com/${baseUrl}`.replace(/\/{2,}/g, "/");
                        let updatedLinkBase = linkBase;
                        let modifiedLinkBase = updatedLinkBase;
                        replacements.forEach((replacement) => {
                            if (modifiedLinkBase.includes(replacement.old)) {
                                modifiedLinkBase = modifiedLinkBase.replace(replacement.old, replacement.new);
                            }
                        });
                        linksHTML += `<p>Site Live: <a href="https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/www/en/${modifiedLinkBase}" target="_blank">https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/www/en/${modifiedLinkBase}</a></p>
                                    <p>Editor: <a href="https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/www/en/${modifiedLinkBase}" target="_blank">https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/www/en/${modifiedLinkBase}</a></p>
                                    <p>Preview: <a href="https://author-grundfos-prod-65.adobecqms.net/content/grundfos/www/en/${modifiedLinkBase}?wcmmode=disabled" target="_blank">https://author-grundfos-prod-65.adobecqms.net/content/grundfos/www/en/${modifiedLinkBase}?wcmmode=disabled</a></p>`;
                        const originalLinkBase = linkBase;
                        let finalLink = null;
                        for (let key in linkMapping) {
                            if (linkMapping.hasOwnProperty(key) && originalLinkBase.includes(key)) {
                                finalLink = originalLinkBase.replace(key, linkMapping[key]);
                                break;
                            }
                        }
                        if (!finalLink) {
                            finalLink = `https://www.grundfos.com/${originalLinkBase}`;
                        }
                        linksHTML += `<p>Live Site Link: <a href="${finalLink}" target="_blank">${finalLink}</a></p>`;
                    } else {
                        linksHTML += `<p>Site Live: <a href="${localLinkSitesLocal}" target="_blank">${localLinkSitesLocal}</a></p>`;
                        linksHTML += `<p>Editor: <a href="${localLinkEditorLocal}" target="_blank">${localLinkEditorLocal}</a></p>`;
                        linksHTML += `<p>Preview: <a href="${localLinkDisabledLocal}" target="_blank">${localLinkDisabledLocal}</a></p>`;
                        const localePrefix = selectedLocalLanguage.split("/")[0];
                        const localeSuffix = selectedLocalLanguage.split("/")[1];
                        const liveLink = `https://www.grundfos.com/${selectedLocalLanguage.split("/")[0]}/${baseUrl}`;
                        let newLink = `https://www.grundfos.com/${baseUrl}`;
                        if (["ch/fr", "be/fr", "ca/fr"].includes(selectedLocalLanguage)) {
                            newLink = `https://www.grundfos.com/${selectedLocalLanguage}/${baseUrl}`;
                        } else {
                            newLink = `https://www.grundfos.com/${localePrefix}/${baseUrl}`;
                        }
                        if (newLink.includes("/products")) {
                            let originalLink = newLink;
                            if (originalLink.includes("https://www.grundfos.com/")) {
                                newLink = originalLink.replace("https://www.grundfos.com/", "https://product-selection.grundfos.com/").replace("/products", "");
                            }
                            if (originalLink.includes("https://www.grundfos.com/cn/")) {
                                newLink = originalLink.replace("https://www.grundfos.com/cn/", "https://product-selection.grundfos.cn/").replace("/products", "");
                            }
                            newLink = newLink.replace("/www/", "/");
                            newLink = newLink.replace("/gb/", "/uk/");
                            linksHTML += `<p>Live Site Link: <a href="${newLink}" target="_blank">${newLink}</a><br></p>`;
                        } else if (newLink.includes("solutions/learn")) {
                            newLink = newLink.replace("solutions/learn", "learn");
                            linksHTML += `<p>Live Site Link: <a href="${newLink}" target="_blank">${newLink}</a><br></p>`;
                        } else {
                            let originalLink = newLink;
                            if (originalLink.includes("https://www.grundfos.com/cn/")) {
                                newLink = originalLink.replace("https://www.grundfos.com/cn/", "https://www.grundfos.cn/");
                            }
                            newLink = newLink.replace("/www/", "/");
                            newLink = newLink.replace("/gb/", "/uk/");
                            linksHTML += `<p>Live Site Link: <a href="${newLink}" target="_blank">${newLink}</a><br></p>`;
                        }
                    }
                });
            } else {
                linksHTML += `<p><strong>No local languages selected.</strong></p>`;
            }
            return linksHTML;
        }
        function generateLinksForCondition1(masterLanguage, localLanguagesChecked, customInput, linksDiv) {
            const uniqueLinks = new Set();
            const uniqueTexts = new Set();
            let PartLinkExists = false;
            let MasterenGBExists = false;
            let MasterLocalExists = false;
            localLanguagesChecked.forEach((localLanguage) => {
                const parts = localLanguage.split("/");
                const liveSiteLanguage = parts[0];
                let linksHTML = ``;
                const editorLink = `https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/language-masters/${masterLanguage}/${customInput}`;
                const sitesLink = `https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/language-masters/${masterLanguage}/${customInput}`;
                const previewLink = `https://author-grundfos-prod-65.adobecqms.net/content/grundfos/language-masters/${masterLanguage}/${customInput}?wcmmode=disabled`;
                const editorLinkMaster = `https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/language-masters/en-GB/${customInput}`;
                const previewLinkMaster = `https://author-grundfos-prod-65.adobecqms.net/content/grundfos/language-masters/en-GB/${customInput}?wcmmode=disabled`;
                const sitesLinkMaster = `https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/language-masters/en-GB/${customInput}`;
                const liveLink = `https://www.grundfos.com/${liveSiteLanguage}/${customInput}`;
                if (!PartLinkExists) {
                    linksHTML = `<p class="link-part"><strong>Part of the link:</strong> "${customInput}"</p>`;
                    PartLinkExists = true;
                }
                if (masterLanguage === "en-GB") {
                    if (!MasterenGBExists) {
                        linksHTML += `<p><strong>Master Language:</strong> (en-GB)</p>`;
                        MasterenGBExists = true;
                    }
                    if (!uniqueLinks.has(sitesLinkMaster)) {
                        linksHTML += `<p><strong>Site Live (en_GB)</strong>: <a href="${sitesLinkMaster}" target="_blank">${sitesLinkMaster}</a></p>`;
                        uniqueLinks.add(sitesLinkMaster);
                    }
                    if (!uniqueLinks.has(editorLinkMaster)) {
                        linksHTML += `<p><strong>Editor (en_GB)</strong>: <a href="${editorLinkMaster}" target="_blank">${editorLinkMaster}</a></p>`;
                        uniqueLinks.add(editorLinkMaster);
                    }
                    if (!uniqueLinks.has(previewLinkMaster)) {
                        linksHTML += `<p><strong>Preview (en_GB)</strong>: <a href="${previewLinkMaster}" target="_blank">${previewLinkMaster}</a><br></p>`;
                        uniqueLinks.add(previewLinkMaster);
                    }
                } else {
                    if (!MasterenGBExists) {
                        linksHTML += `<p><strong>Master Language:</strong> (en-GB)</p>`;
                        MasterenGBExists = true;
                    }
                    if (!uniqueLinks.has(sitesLinkMaster)) {
                        linksHTML += `<p><strong>Site Live (en_GB)</strong>: <a href="${sitesLinkMaster}" target="_blank">${sitesLinkMaster}</a></p>`;
                        uniqueLinks.add(sitesLinkMaster);
                    }
                    if (!uniqueLinks.has(editorLinkMaster)) {
                        linksHTML += `<p><strong>Editor (en_GB)</strong>: <a href="${editorLinkMaster}" target="_blank">${editorLinkMaster}</a></p>`;
                        uniqueLinks.add(editorLinkMaster);
                    }
                    if (!uniqueLinks.has(previewLinkMaster)) {
                        linksHTML += `<p><strong>Preview (en_GB)</strong>: <a href="${previewLinkMaster}" target="_blank">${previewLinkMaster}</a><br></p>`;
                        uniqueLinks.add(previewLinkMaster);
                    }
                }
                if (masterLanguage !== "en-GB") {
                    if (!MasterLocalExists) {
                        linksHTML += `<p><strong>Master Language:</strong> (${masterLanguage})</p>`;
                        MasterLocalExists = true;
                    }
                    if (!uniqueLinks.has(sitesLink)) {
                        linksHTML += `<p><strong>Site Live (${masterLanguage})</strong>: <a href="${sitesLink}" target="_blank">${sitesLink}</a></p>`;
                        uniqueLinks.add(sitesLink);
                    }
                    if (!uniqueLinks.has(editorLink)) {
                        linksHTML += `<p><strong>Editor (${masterLanguage})</strong>: <a href="${editorLink}" target="_blank">${editorLink}</a></p>`;
                        uniqueLinks.add(editorLink);
                    }
                    if (!uniqueLinks.has(previewLink)) {
                        linksHTML += `<p><strong>Preview (${masterLanguage})</strong>: <a href="${previewLink}" target="_blank">${previewLink}</a></p>`;
                        uniqueLinks.add(previewLink);
                    }
                }
                linksHTML += generateAdditionalLinks(masterLanguage, localLanguage, customInput, localLanguages, liveSiteLanguage, linksDiv);
                linksDiv.innerHTML += linksHTML;
                removeDuplicateLinks(linksDiv);
            });
        }
        function generateLinksForCondition2(masterLanguage, localLanguagesChecked, customInput, linksDiv) {
            const uniqueLinks = new Set();
            const uniqueTexts = new Set();
            localLanguagesChecked.forEach((localLanguage) => {
                const parts = localLanguage.split("/");
                const liveSiteLanguage = parts[0];
                let linksHTML = ``;
                const Rollout = `https://author-grundfos-prod-65.adobecqms.net/mnt/overlay/wcm/msm/content/touch-ui/admin/rolloutdialog.html/content/grundfos/language-masters/${masterLanguage}/${customInput}`;
                const sitesLink = `https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/language-masters/${masterLanguage}/${customInput}`;
                const Properties = `https://author-grundfos-prod-65.adobecqms.net/mnt/overlay/wcm/core/content/sites/properties.html?item=/content/grundfos/language-masters/${masterLanguage}/${customInput}`;
                linksHTML += "<p><strong>*************Start Tagging*************</strong></p>";
                linksHTML += `<p><strong>Master Language:</strong> ${masterLanguage}</p>`;
                linksHTML += `Site Live: <a href="${sitesLink}" target="_blank">${sitesLink}</a><br>`;
                linksHTML += `Rollout: <a href="${Rollout}" target="_blank">${Rollout}</a><br>`;
                linksHTML += `Properties: <a href="${Properties}" target="_blank">${Properties}</a><br>`;
                const localLanguagesList = localLanguages[masterLanguage] || [];
                if (localLanguagesChecked.includes(masterLanguage)) {
                    const remainingLanguages = localLanguagesList.filter((lang) => lang !== masterLanguage);
                    if (remainingLanguages.length > 0) {
                        linksHTML += `<p><strong>Master Language Selected (${masterLanguage}): ${remainingLanguages.join(", ")}</strong></p>`;
                    } else {
                        linksHTML += `<p><strong>Master Language Selected (${masterLanguage}): No additional locales available to display.</strong></p>`;
                    }
                    remainingLanguages.forEach((language) => {
                        linksHTML += generateLocalLanguageLinksTagging(language, customInput);
                        linksHTML += "<p><strong>*************End Tagging*************</strong></p>";
                    });
                } else if (localLanguagesChecked.length > 0) {
                    linksHTML += `<p><strong>Selected Local Languages:</strong> ${localLanguagesChecked.join(", ")}</p>`;
                    localLanguagesChecked.forEach((selectedLocalLanguage) => {
                        linksHTML += generateLocalLanguageLinksTagging(selectedLocalLanguage, customInput);
                        linksHTML += "<p><strong>*************End Tagging*************</strong></p>";
                    });
                } else {
                    linksHTML += `<p><strong>No local languages selected.</strong></p>`;
                }
                linksHTML += generateAdditionalLinks(masterLanguage, localLanguage, customInput, localLanguages, liveSiteLanguage, linksDiv);
                linksDiv.innerHTML += linksHTML;
            });
        }
        function generateLocalLanguageLinksTagging(language, customInput) {
            const localpublishLinks = [`https://author-grundfos-prod-65.adobecqms.net/mnt/override/libs/wcm/core/content/common/managepublicationwizard.html?item=/content/grundfos/${language}/${customInput}`];
            const localsitesLink = `https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/${language}/${customInput}`;
            const localProperties = `https://author-grundfos-prod-65.adobecqms.net/mnt/overlay/wcm/core/content/sites/properties.html?item=/content/grundfos/${language}/${customInput}`;
            return `<p><strong>Local Language (${language}):</strong></p>` + `Properties: <a href="${localProperties}" target="_blank">${localProperties}</a><br>` + `Publish: <a href="${localpublishLinks}" target="_blank">${localpublishLinks}</a><br>`;
        }
        let savedFragmentInputs = [];
        const fragmentInput = document.getElementById("fragmentInput");
        const savedFragmentsContainer = document.getElementById("savedFragments");
        const clearFragmentsButton = document.getElementById("clearFragments");
        const fragmentContainer = document.getElementById("fragmentContainer");
        clearFragmentsButton.addEventListener("click", () => {
            savedFragmentInputs = [];
            updateSavedFragmentsCheckboxes();
            fragmentContainer.innerHTML = "";
        });
        let currentMasterLanguage = "";
        let currentLocalLanguages = [];
        let currentSelectedFragments = [];
        document.addEventListener("DOMContentLoaded", () => {
            document.getElementById("masterLanguage").addEventListener("change", handleMasterLanguageChange);
            document.getElementById("addFragment").addEventListener("click", () => {
                const fragmentValue = fragmentInput.value.trim();
                if (fragmentValue && !savedFragmentInputs.includes(fragmentValue)) {
                    savedFragmentInputs.push(fragmentValue);
                    currentSelectedFragments = [fragmentValue];
                    updateSavedFragmentsCheckboxes();
                    selectNewlyAddedCheckbox(fragmentValue);
                    fragmentInput.value = "";
                    fragmentContainer.innerHTML = "";
                    generateLinksForCondition3();
                } else {
                }
            });
        });
        function updateSavedFragmentsCheckboxes() {
            const savedFragmentContainer = document.getElementById("savedFragments");
            savedFragmentContainer.innerHTML = "";
            savedFragmentInputs.forEach((fragment) => {
                const fragmentsIndex = fragment.indexOf("/fragments");
                let fragmentPath = fragmentsIndex !== -1 ? fragment.substring(fragmentsIndex) : "";
                if (fragmentPath.endsWith(".html")) {
                    fragmentPath = fragmentPath.slice(0, -5);
                }
                if (fragmentPath.endsWith("/")) {
                    fragmentPath = fragmentPath.slice(0, -1);
                }
                const label = document.createElement("label");
                const checkbox = document.createElement("input");
                checkbox.type = "checkbox";
                checkbox.value = fragment;
                checkbox.checked = currentSelectedFragments.includes(fragmentPath);
                checkbox.addEventListener("change", function () {
                    handleSavedFragmentChange();
                    toggleRemoveButton(checkbox, removeButton);
                });
                const removeButton = document.createElement("button");
                removeButton.textContent = "X";
                removeButton.style.marginLeft = "10px";
                removeButton.style.marginTop = "0px";
                removeButton.style.cursor = "pointer";
                removeButton.style.padding = "5px";
                removeButton.style.display = checkbox.checked ? "inline-block" : "none";
                removeButton.addEventListener("click", function () {
                    removeFragment(fragment);
                });
                label.appendChild(checkbox);
                label.appendChild(document.createTextNode(` ${fragmentPath}`));
                const fragmentDiv = document.createElement("div");
                fragmentDiv.appendChild(label);
                fragmentDiv.appendChild(removeButton);
                savedFragmentContainer.appendChild(fragmentDiv);
            });
        }
        function toggleRemoveButton(checkbox, removeButton) {
            removeButton.style.display = checkbox.checked ? "inline-block" : "none";
        }
        function removeFragment(fragment) {
            const index = savedFragmentInputs.indexOf(fragment);
            if (index !== -1) {
                savedFragmentInputs.splice(index, 1);
            }
            currentSelectedFragments = currentSelectedFragments.filter((f) => f !== fragment);
            updateSavedFragmentsCheckboxes();
            if (currentSelectedFragments.length === 0) {
                fragmentContainer.innerHTML = "";
            } else {
                handleSavedFragmentChange();
            }
        }
        function selectNewlyAddedCheckbox(fragmentValue) {
            const checkbox = document.querySelector(`#savedFragments input[type="checkbox"][value="${fragmentValue}"]`);
            if (checkbox) {
                checkbox.checked = true;
            }
        }
        function handleSavedFragmentChange() {
            const selectedFragments = [];
            const savedFragmentCheckboxes = document.querySelectorAll('#savedFragments input[type="checkbox"]:checked');
            savedFragmentCheckboxes.forEach((checkbox) => {
                selectedFragments.push(checkbox.value);
            });
            currentSelectedFragments = selectedFragments;
            fragmentContainer.innerHTML = "";
            generateLinksForCondition3();
        }
        function handleMasterLanguageChange() {
            const masterLanguage = document.getElementById("masterLanguage").value;
            if (currentMasterLanguage !== masterLanguage) {
                currentMasterLanguage = masterLanguage;
                const searchContainer = document.getElementById("searchContainer");
                const button = document.getElementById("toggleSearchButton");
                searchContainer.style.display = "none";
                button.textContent = "Show Search Input";
                const localLanguageCheckboxes = document.querySelectorAll('#localLanguages input[type="checkbox"]');
                localLanguageCheckboxes.forEach((checkbox) => {
                    checkbox.checked = false;
                });
                const savedFragmentCheckboxes = document.querySelectorAll('#savedFragments input[type="checkbox"]');
                savedFragmentCheckboxes.forEach((checkbox) => {
                    checkbox.checked = false;
                });
                currentLocalLanguages = [];
                currentSelectedFragments = [];
                generateLinksForCondition3();
                updateLocalLanguages();
            }
        }
        document.addEventListener("DOMContentLoaded", () => {
            const savedFragmentCheckboxes = document.querySelectorAll('#savedFragments input[type="checkbox"]');
            savedFragmentCheckboxes.forEach((checkbox) => {
                checkbox.addEventListener("change", handleSavedFragmentChange);
            });
        });
        function generateLinksForCondition3() {
            const checkboxes = document.querySelectorAll('#localLanguages input[type="checkbox"]:checked');
            const localLanguagesChecked = Array.from(checkboxes).map((checkbox) => checkbox.value);
            let masterLanguage = document.getElementById("masterLanguage").value;
            fragmentContainer.innerHTML = "";
            if (!Array.isArray(localLanguagesChecked)) {
                localLanguagesChecked = [];
            }
            if (currentSelectedFragments.length === 0 || currentLocalLanguages.length === 0) {
                return;
            }
            currentSelectedFragments.forEach((fragment) => {
                const fragmentsIndex = fragment.indexOf("/fragments");
                let fragmentPath = fragmentsIndex !== -1 ? fragment.substring(fragmentsIndex) : "";
                if (fragmentPath.endsWith(".html")) {
                    fragmentPath = fragmentPath.slice(0, -5);
                }
                if (fragmentPath.endsWith("/")) {
                    fragmentPath = fragmentPath.slice(0, -1);
                }
                const masterLinkEditor = `https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/language-masters/${masterLanguage}${fragmentPath}`;
                const masterLinkSites = `https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/language-masters/${masterLanguage}${fragmentPath}`;
                const masterLinkPreview = `https://author-grundfos-prod-65.adobecqms.net/content/grundfos/language-masters/${masterLanguage}${fragmentPath}?wcmmode=disabled`;
                let fragmentHtml = `<p class="link-part"><strong>Selected Fragment:</strong> "${fragmentPath}"</p>`;
                if (masterLanguage !== "en-GB") {
                    fragmentHtml += `<p><strong>Master Language:</strong> en-GB</p>`;
                    fragmentHtml += `Site Live (en-GB): <a href="https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/language-masters/en-GB${fragmentPath}" target="_blank">https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/language-masters/en-GB${fragmentPath}</a><br>`;
                    fragmentHtml += `Editor (en-GB): <a href="https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/language-masters/en-GB${fragmentPath}" target="_blank">https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/language-masters/en-GB${fragmentPath}</a><br>`;
                    fragmentHtml += `Preview (en-GB): <a href="https://author-grundfos-prod-65.adobecqms.net/content/grundfos/language-masters/en-GB${fragmentPath}?wcmmode=disabled" target="_blank">https://author-grundfos-prod-65.adobecqms.net/content/grundfos/language-masters/en-GB${fragmentPath}?wcmmode=disabled</a><br>`;
                }
                fragmentHtml += `<p><strong>Master Language:</strong> ${masterLanguage}</p>`;
                fragmentHtml += `Site Live: <a href="${masterLinkSites}" target="_blank">${masterLinkSites}</a><br>`;
                fragmentHtml += `Editor: <a href="${masterLinkEditor}" target="_blank">${masterLinkEditor}</a><br>`;
                fragmentHtml += `Preview: <a href="${masterLinkPreview}" target="_blank">${masterLinkPreview}</a><br>`;
                const localLanguagesList = localLanguages[masterLanguage] || [];
                if (localLanguagesChecked.includes(masterLanguage)) {
                    const remainingLanguages = localLanguagesList.filter((lang) => lang !== masterLanguage);
                    if (remainingLanguages.length > 0) {
                        fragmentHtml += `<p><strong>Master Language Selected (${masterLanguage}): ${remainingLanguages.join(", ")}</strong></p>`;
                    } else {
                        fragmentHtml += `<p><strong>Master Language Selected (${masterLanguage}): No additional locales available to display.</strong></p>`;
                    }
                    remainingLanguages.forEach((language) => {
                        fragmentHtml += generateLocalLanguageLinks(language, fragmentPath);
                    });
                } else if (localLanguagesChecked.length > 0) {
                    fragmentHtml += `<p><strong>Selected Local Languages:</strong> ${localLanguagesChecked.join(", ")}</p>`;
                    localLanguagesChecked.forEach((selectedLocalLanguage) => {
                        fragmentHtml += generateLocalLanguageLinks(selectedLocalLanguage, fragmentPath);
                    });
                } else {
                    fragmentHtml += `<p><strong>No local languages selected.</strong></p>`;
                }
                fragmentContainer.innerHTML += fragmentHtml;
            });
        }
        function generateLocalLanguageLinks(language, fragmentPath) {
            const localLinkEditorLocal = `https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/${language}${fragmentPath}`;
            const localLinkSitesLocal = `https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/${language}${fragmentPath}`;
            const localLinkDisabledLocal = `https://author-grundfos-prod-65.adobecqms.net/content/grundfos/${language}${fragmentPath}?wcmmode=disabled`;
            return (
                `<p><strong>Local Language (${language}):</strong></p>` +
                `Site Live: <a href="${localLinkSitesLocal}" target="_blank">${localLinkSitesLocal}</a><br>` +
                `Editor: <a href="${localLinkEditorLocal}" target="_blank">${localLinkEditorLocal}</a><br>` +
                `Preview: <a href="${localLinkDisabledLocal}" target="_blank">${localLinkDisabledLocal}</a><br>`
            );
        }
        document.addEventListener("DOMContentLoaded", function () {
            const select = document.getElementById("masterLanguage");
            const options = Array.from(select.options);
            options.sort((a, b) => {
                if (a.value === "") return -1;
                return a.text.localeCompare(b.text);
            });
            select.innerHTML = "";
            options.forEach((option) => {
                select.appendChild(option);
            });
        });
        document.addEventListener("DOMContentLoaded", function () {
            const customInput = document.getElementById("customInput");
            const masterLanguage = document.getElementById("masterLanguage");
            masterLanguage.disabled = true;
            customInput.addEventListener("input", function () {
                masterLanguage.disabled = customInput.value.trim() === "";
            });
        });
        document.querySelectorAll('input[name="condition"]').forEach((checkbox) => {
            checkbox.addEventListener("change", function () {
                const fragmentSection = document.getElementById("fragmentSection");
                if (this.value === "radio3" && this.checked) {
                    fragmentSection.classList.remove("hidden");
                } else if (this.value === "radio3" && !this.checked) {
                    fragmentSection.classList.add("hidden");
                }
            });
        });
        function convertText() {
            const input = document.getElementById("inputText").value.trim();
            if (input.length === 0) {
                return;
            }
            const output = input.charAt(0).toUpperCase() + input.slice(1).toLowerCase();
            document.getElementById("inputText").value = output;
        }
        document.addEventListener("DOMContentLoaded", () => {
            let previousLink = null;
            observeContainers();
            loadLinkStates();
            updateResetButtons();
            document.addEventListener("click", (event) => {
                const target = event.target;
                if (target && target.tagName === "A") {
                    const parentContainer = target.closest("#links, #fragmentContainer");
                    if (parentContainer) {
                        const currentLang = getCurrentLang();
                        if (previousLink) {
                            previousLink.classList.remove("active");
                            previousLink.classList.add("previous");
                            saveLinkState(currentLang, previousLink.href, "previous");
                        }
                        target.classList.add("active");
                        target.classList.remove("previous");
                        saveLinkState(currentLang, target.href, "active");
                        previousLink = target;
                        updateResetButtons();
                    }
                }
            });
            document.getElementById("resetLinks").addEventListener("click", () => {
                resetLinks("#links");
                alert("Tráº¡ng thÃ¡i liÃªn káº¿t trong #links Ä‘Ã£ Ä‘Æ°á»£c reset!");
            });
            document.getElementById("resetFragmentLinks").addEventListener("click", () => {
                resetLinks("#fragmentContainer");
                alert("Tráº¡ng thÃ¡i liÃªn káº¿t trong #fragmentContainer Ä‘Ã£ Ä‘Æ°á»£c reset!");
            });
            function saveLinkState(lang, href, state) {
                const storageKey = `linkStates_${lang}`;
                const linkStates = JSON.parse(localStorage.getItem(storageKey) || "{}");
                linkStates[href] = state;
                localStorage.setItem(storageKey, JSON.stringify(linkStates));
            }
            function loadLinkStates() {
                const currentLang = getCurrentLang();
                const storageKey = `linkStates_${currentLang}`;
                const linkStates = JSON.parse(localStorage.getItem(storageKey) || "{}");
                ["#links", "#fragmentContainer"].forEach((containerId) => {
                    const container = document.querySelector(containerId);
                    if (!container) return;
                    for (const [href, state] of Object.entries(linkStates)) {
                        const link = Array.from(container.querySelectorAll("a")).find((link) => link.href === href);
                        if (link) {
                            link.classList.add(state);
                            if (state === "active") previousLink = link;
                        }
                    }
                });
                updateResetButtons();
            }
            function resetLinks(containerId) {
                document.querySelectorAll(`${containerId} a`).forEach((link) => {
                    link.classList.remove("active", "previous");
                });
                const linksLang = getCurrentLang();
                const storageKey = `linkStates_${linksLang}`;
                localStorage.removeItem(storageKey);
                updateResetButtons();
            }
            function getCurrentLang() {
                const pathParts = window.location.pathname.split("/").filter((part) => part);
                return pathParts.length >= 2 ? `${pathParts[0]}/${pathParts[1]}` : "default";
            }
            function observeContainers() {
                const observer = new MutationObserver(() => {
                    loadLinkStates();
                });
                const config = { childList: true, subtree: true };
                ["#links", "#fragmentContainer"].forEach((containerId) => {
                    const container = document.querySelector(containerId);
                    if (container) observer.observe(container, config);
                });
            }
            function updateResetButtons() {
                const hasActiveLinks = document.querySelector("#links a.active, #links a.previous");
                const hasActiveFragmentLinks = document.querySelector("#fragmentContainer a.active, #fragmentContainer a.previous");
                document.getElementById("resetLinks").style.display = hasActiveLinks ? "block" : "none";
                document.getElementById("resetFragmentLinks").style.display = hasActiveFragmentLinks ? "block" : "none";
            }
        });
        document.getElementById("customInput").addEventListener("keydown", function (event) {
            if (event.key === "Enter") {
                generateLinks();
            }
        });
        document.getElementById("searchInput").addEventListener("keydown", function (event) {
            if (event.key === "Enter") {
                applySearchInput();
            }
        });
        document.getElementById("customInput").addEventListener("keydown", function (event) {
    if (event.key === "Enter") {
        event.preventDefault(); 
        document.getElementById("generateAndSaveBtn").click();
    }
});
        document.addEventListener("keydown", function (event) {
            if (event.target.id === "masterCodeInput" && event.key === "Enter") {
                event.preventDefault();
                generateMasterCheckboxes();
            }
        });
        document.getElementById("fragmentInput").addEventListener("keydown", function (event) {
            if (event.key === "Enter") {
                const fragmentValue = fragmentInput.value.trim();
                if (fragmentValue && !savedFragmentInputs.includes(fragmentValue)) {
                    savedFragmentInputs.push(fragmentValue);
                    currentSelectedFragments = [fragmentValue];
                    updateSavedFragmentsCheckboxes();
                    selectNewlyAddedCheckbox(fragmentValue);
                    fragmentInput.value = "";
                    fragmentContainer.innerHTML = "";
                    generateLinksForCondition3();
                } else {
                }
            }
        });
    </script>
</body>
</html>
