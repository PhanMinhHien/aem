<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dynamic_Links_Generator_AEM</title>
    <style>
        .openTagging,
        .closeTagging {
            background-color: #007bff;
            padding: 15px;
            display: inline-block;
            color: #ffff;
            border-radius: 5px;
        }

        .taskSection .form-group {
            flex-direction: row;
            justify-content: space-between;
        }

        .check {
            margin-bottom: 20px;
        }

        .delete-btn {
            padding: 0;
        }

        .link-part {
            background-color: #007bff;
            padding: 10px;
            color: #fff;
            display: inline-block;
        }

        #applySearchButton,
        #addFragment,
        #clearFragments {
            margin-top: 20px;
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            padding: 20px;
            background-color: #f0f8ff;
            box-sizing: border-box;
        }

        h2 {
            color: #003366;
            border-bottom: 3px solid #007bff;
            padding-bottom: 6px;
            margin-top: 40px;
        }

        button {
            padding: 10px 0.5vw;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        #localLanguages:not(:empty) {
            margin-bottom: 20px;
        }

        #localLanguages {
            column-count: 5;
        }

        button:hover {
            background-color: #0056b3;
        }

        a {
            color: #007bff;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        a.previous {
            color: #05a769 !important;
        }

        a.active {
            color: red !important;
        }

        .form-group {
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 6px;
            font-weight: 600;
            color: #003366;
        }

        .form-group input[type="text"],
        .form-group input[type="number"],
        .form-group input[type="email"],
        .form-group select,
        .form-group textarea {
            padding: 12px 14px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 16px;
            background-color: #f9f9f9;
            transition: all 0.3s ease;
            width: 100%;
            box-sizing: border-box;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: #007bff;
            background-color: #fff;
            outline: none;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: #4caf50;
        }

        .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 10px;
        }

        .radio-group label {
            font-weight: 500;
            color: #003366;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-group button {
            width: fit-content;
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .form-group button:hover {
            background-color: #0056b3;
        }

        #links:not(:empty),
        #fragmentContainer:not(:empty) {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            word-wrap: break-word;
            margin-bottom: 50px;
        }

        #links:empty {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 5px;
            height: 90vh;
        }

        #links a,
        #fragmentContainer a {
            display: block;
            margin-bottom: 8px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background-color: #fff;
            font-family: Arial, sans-serif;
        }

        th {
            background-color: #007bff;
            color: white;
            padding: 12px 15px;
            text-align: left;
            font-weight: bold;
        }

        td {
            padding: 12px 15px;
            text-align: left;
            border: 1px solid #ddd;
            font-size: 14px;
        }

        tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        tr:hover {
            background-color: #f1f1f1;
        }

        .popup,
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            background-color: rgba(0, 0, 0, 0.4);
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .modal-content {
            background-color: #fff;
            margin: 0;
            padding: 20px;
            border: 1px solid #888;
            width: 70%;
            max-width: 50%;
            max-height: 50%;
            overflow-x: auto;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .close-button {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            position: absolute;
            top: 0;
            right: 15px;
            cursor: pointer;
        }

        .close-button:hover,
        .close-button:focus {
            color: black;
        }

        #floatingSavedBtn {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 60px;
            height: 60px;
            background-color: #007bff;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 60px;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: background-color 0.3s;
        }

        #floatingSavedBtn:hover {
            background-color: #0056b3;
        }

        .hidden {
            display: none;
        }

        textarea {
            resize: none;
        }

        #floatingMenu {
            position: fixed;
            top: 50%;
            left: 20px;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 12px;
            z-index: 9999;
        }

        .floating-btn {
            position: relative;
            background-color: #007BFF;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 50%;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            overflow: hidden;
            /* transition: width 0.3s ease; */
            width: 44px;
        }

        .floating-btn .btn-label {
            white-space: nowrap;
            opacity: 0;
            margin-left: 10px;
            transition: opacity 0.3s ease;
            pointer-events: none;
            width: 100%;
        }

        .floating-btn:hover {
            width: 10vw;
            border-radius: 25px;
            padding-right: 20px;
        }

        .floating-btn:hover .btn-label {
            opacity: 1;
        }

        .floating-btn:hover {
            background: #005bb5;
        }

        #floatingPanels {
            position: fixed;
            top: 50%;
            left: 80px;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 12px;
            z-index: 9998;
        }

        .floating-panel {
            display: none;
            background: #fff;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            width: 650px;
            max-height: 70vh;
            overflow-y: auto;
            animation: fadeIn 0.3s ease-in-out;
        }

        .floating-panel.show {
            display: block;
        }

        .floating-btn.active {
            background-color: #ffffff;
            color: white;
            box-shadow: 0 0 8px #007bff;
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        .floating-btn.active:hover .btn-label {
            color: #007bff;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .column-right {
            margin-left: calc(700px + 60px);
            width: 100%;
        }

        #floatingMenuContainer {
            max-height: 94vh;
            overflow-y: auto;
            scrollbar-width: none;
            /* Firefox */
            -ms-overflow-style: none;
            /* IE 10+ */
        }

        #floatingMenuContainer::-webkit-scrollbar {
            display: none;
            /* Chrome, Safari, Edge */
        }
    </style>
</head>

<body>
    <div class="container">
        <div id="floatingMenu">
            <button class="floating-btn" data-target="languageSection">
                üåê<span class="btn-label">Language</span>
            </button>
            <button class="floating-btn" data-target="fixedMasterCodesContainer">
                üìå<span class="btn-label">Master Codes</span>
            </button>
            <button class="floating-btn" data-target="savedCustomInputs">
                üíæ<span class="btn-label">Saved Inputs</span>
            </button>
            <button class="floating-btn" data-target="taskSection">
                üõ†Ô∏è<span class="btn-label">Tasks</span>
            </button>
            <button class="floating-btn" data-target="fragmentSection">
                üß©<span class="btn-label">Fragments</span>
            </button>
            <button class="floating-btn" data-target="buttonsSection">
                ‚öôÔ∏è<span class="btn-label">Settings</span>
            </button>
            <button class="floating-btn" data-target="convertText">
                üî§<span class="btn-label">Text Tools</span>
            </button>
        </div>

        <div id="floatingPanels">
            <div id="floatingMenuContainer">
                <div class="floating-panel" id="languageSection">
                    <h2>Language & Link</h2>
                    <div class="form-group">
                        <label for="masterLanguage">Master Language:</label>
                        <select id="masterLanguage" onchange="updateLocalLanguages()">
                            <option value="" selected disabled hidden>Choose here</option>
                            <option value="en-GB">en-GB (Master)</option>
                            <option value="bs-BS">bs-BS (Bosnia)</option>
                            <option value="bg-BG">bg-BG (Bulgaria)</option>
                            <option value="hr-HR">hr-HR (Croatia)</option>
                            <option value="cs-CZ">cs-CZ (Czech)</option>
                            <option value="da-DK">da-DK (Denmark)</option>
                            <option value="et-EE">et-EE (Estonian)</option>
                            <option value="fi-FI">fi-FI (Finland)</option>
                            <option value="el-GR">el-GR (Greek)</option>
                            <option value="hu-HU">hu-HU (Hungary)</option>
                            <option value="it-IT">it-IT (Italy)</option>
                            <option value="ja-JP">ja-JP (Japan)</option>
                            <option value="ko-KR">ko-KR (Korea)</option>
                            <option value="lv-LV">lv-LV (Latvia)</option>
                            <option value="lt-LT">lt-LT (Lithuania)</option>
                            <option value="no-NO">no-NO (Norway)</option>
                            <option value="pl-PL">pl-PL (Poland)</option>
                            <option value="ro-RO">ro-RO (Romania)</option>
                            <option value="ru-RU">ru-RU (Russia)</option>
                            <option value="sr-RS">sr-RS (Serbia)</option>
                            <option value="sk-SK">sk-SK (Slovakia)</option>
                            <option value="sl-SI">sl-SI (Slovenia)</option>
                            <option value="sv-SE">sv-SE (Sweden)</option>
                            <option value="th-TH">th-TH (Thailand)</option>
                            <option value="tr-TR">tr-TR (Turkey)</option>
                            <option value="uk-UA">uk-UA (Ukraine)</option>
                            <option value="vi-VI">vi-VI (Vietnamese)</option>
                            <option value="en-AU">en-AU (English (Australia))</option>
                            <option value="en-US">en-US (English (USA))</option>
                            <option value="de-DE">de-DE (Germany)</option>
                            <option value="fr-FR">fr-FR (France)</option>
                            <option value="pt-PT">pt-PT (Portugal)</option>
                            <option value="es-ES">es-ES (Spain)</option>
                            <option value="nl-NL">nl-NL (Netherlands)</option>
                            <option value="zh-CN">zh-CN (China)</option>
                        </select>
                    </div>
                    <div id="localLanguages" class="local-languages"></div>
                    <div class="form-group">
                        <label for="customInput">Custom Input:</label>
                        <input type="text" id="customInput" />
                    </div>
                    <div class="check"><a
                            href="https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/language-masters/en-GB"
                            target="_blank">Wrong URL?</a> | <a href="https://www.grundfos.com/components"
                            target="_blank">Brand Components</a></div>
                    <div id="searchContainer" style="display: none">
                        <div class="form-group">
                            <label for="searchInput">Search Language:</label>
                            <input type="text" id="searchInput" placeholder="Search Language"
                                oninput="handleInputSearch()" />
                        </div>
                        <div id="masterLanguageInfo">Master Language:</div>
                        <div id="localLanguagesInfo">Local Languages:</div>
                        <button id="applySearchButton" onclick="applySearchInput()">Apply Search</button>
                    </div>
                </div>
                <div class="floating-panel" id="fixedMasterCodesContainer" style="margin-top: 20px">
                    <h2>Key Markets</h2>
                    <div id="fixedMasterCodes" style="display: flex; flex-wrap: wrap; gap: 10px"></div>
                </div>
                <div class="floating-panel" id="savedCustomInputs">
                    <div id="radioContainer"></div>
                    <button id="clearSavedLinksBtn" onclick="clearRadioSelections()"
                        style="margin-top: 15px; background: #ffdddd; border: 1px solid #ff9999; padding: 6px 12px; border-radius: 8px; cursor: pointer; color: red; width: 100%; font-weight: bold">üßπ
                        Clear Saved Links</button>
                </div>
                <div class="floating-panel" id="taskSection">
                    <h2>Type Tasks</h2>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" name="condition" value="radio1" checked />
                            Normal task</label>
                        <label>
                            <input type="checkbox" name="condition" value="radio3" id="fragmentRadio" />
                            Fragment Reskin task
                        </label>
                        <label>
                            <input type="checkbox" name="condition" value="radio2" />
                            Tagging task (Unit)</label>
                    </div>
                </div>
                <div class="floating-panel" id="fragmentSection" class="hidden">
                    <div class="form-group">
                        <input type="text" id="fragmentInput" placeholder="Enter fragment" />
                        <button id="addFragment">Add Fragment</button>
                    </div>
                    <div id="savedFragmentsContainer">
                        <h4>Saved Fragments</h4>
                        <div id="savedFragments"></div>
                    </div>
                    <button id="clearFragments">Clear Saved Fragments</button>
                    <button id="resetFragmentLinks">Reset Status Fragment Links</button>
                </div>
                <div class="floating-panel" id="buttonsSection">
                    <h2>Action</h2>
                    <button id="generateAndSaveBtn">Generate & Save</button>
                    <button onclick="generateLinks()">Generate</button>
                    <button id="resetLinks">Reset Status Links</button>
                    <button onclick="generateLanguageSuggestions()">Suggest Language Inputs</button>
                    <button id="toggleSearchButton" onclick="toggleSearchInput()">Show Search Input</button>
                    <button id="openModalButton">Show Table</button>
                    <div id="buttons"></div>
                </div>
                <div class="floating-panel" id="convertText">
                    <h2>Convert text</h2>
                    <div class="form-group">
                        <textarea id="inputText" rows="1" placeholder="Enter text here..."
                            oninput="convertText()"></textarea>
                    </div>
                </div>
            </div>
        </div>
        <div class="column-right">
            <div id="links"></div>
            <div id="fragmentContainer"></div>
        </div>
    </div>
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="closeModalButton">x</span>
            <div class="table-container">
                <table border="1">
                    <thead>
                        <tr>
                            <th>Country</th>
                            <th>Grundfos domain</th>
                            <th>Sales Company</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Global</td>
                            <td>WWW</td>
                            <td>Global</td>
                        </tr>
                        <tr>
                            <td>United Kingdom</td>
                            <td>UK</td>
                            <td>GB</td>
                        </tr>
                        <tr>
                            <td>Ireland</td>
                            <td>IE</td>
                            <td>GPI</td>
                        </tr>
                        <tr>
                            <td>Denmark</td>
                            <td>DK</td>
                            <td>GDK</td>
                        </tr>
                        <tr>
                            <td>Norway</td>
                            <td>NO</td>
                            <td>GNO</td>
                        </tr>
                        <tr>
                            <td>Sweden</td>
                            <td>SE</td>
                            <td>GSV</td>
                        </tr>
                        <tr>
                            <td>Finland</td>
                            <td>FI</td>
                            <td>GSF</td>
                        </tr>
                        <tr>
                            <td>Germany</td>
                            <td>DE</td>
                            <td>GWS</td>
                        </tr>
                        <tr>
                            <td>Austria</td>
                            <td>AT</td>
                            <td>GPO</td>
                        </tr>
                        <tr>
                            <td>Schwitzerland</td>
                            <td>CH</td>
                            <td>GPS</td>
                        </tr>
                        <tr>
                            <td>Schwitzerland</td>
                            <td>CH/FR</td>
                            <td>GPS</td>
                        </tr>
                        <tr>
                            <td>France</td>
                            <td>FR</td>
                            <td>GFD</td>
                        </tr>
                        <tr>
                            <td>Belgium</td>
                            <td>BE/FR</td>
                            <td>GBL_FR</td>
                        </tr>
                        <tr>
                            <td>Belgium</td>
                            <td>BE</td>
                            <td>GBL_NL</td>
                        </tr>
                        <tr>
                            <td>Netherlands</td>
                            <td>NL</td>
                            <td>GNL</td>
                        </tr>
                        <tr>
                            <td>Spain</td>
                            <td>ES</td>
                            <td>BGE</td>
                        </tr>
                        <tr>
                            <td>Portugal</td>
                            <td>PT</td>
                            <td>BGP</td>
                        </tr>
                        <tr>
                            <td>Italy</td>
                            <td>IT</td>
                            <td>GIT</td>
                        </tr>
                        <tr>
                            <td>Greece</td>
                            <td>GR</td>
                            <td>GPH</td>
                        </tr>
                        <tr>
                            <td>Poland</td>
                            <td>PL</td>
                            <td>GPL</td>
                        </tr>
                        <tr>
                            <td>Czech republic</td>
                            <td>CZ</td>
                            <td>GCZ</td>
                        </tr>
                        <tr>
                            <td>Slovakia</td>
                            <td>SK</td>
                            <td>GSK</td>
                        </tr>
                        <tr>
                            <td>Latvia</td>
                            <td>LV</td>
                            <td>GLA_LV</td>
                        </tr>
                        <tr>
                            <td>Lithuania</td>
                            <td>LT</td>
                            <td>GLA_LT</td>
                        </tr>
                        <tr>
                            <td>Estonia</td>
                            <td>EE</td>
                            <td>GLA_EE</td>
                        </tr>
                        <tr>
                            <td>United Arab Emirates</td>
                            <td>AE</td>
                            <td>GGD</td>
                        </tr>
                        <tr>
                            <td>Saudi Arabia</td>
                            <td>SA</td>
                            <td>GSA</td>
                        </tr>
                        <tr>
                            <td>Egypt</td>
                            <td>EG</td>
                            <td>GEG</td>
                        </tr>
                        <tr>
                            <td>Turkey</td>
                            <td>TR</td>
                            <td>GTR</td>
                        </tr>
                        <tr>
                            <td>Serbia</td>
                            <td>RS</td>
                            <td>GSE</td>
                        </tr>
                        <tr>
                            <td>Albania</td>
                            <td>AL</td>
                            <td>GSE-AL</td>
                        </tr>
                        <tr>
                            <td>Bosnia Herzegovina</td>
                            <td>BA</td>
                            <td>GBH</td>
                        </tr>
                        <tr>
                            <td>Slovenia</td>
                            <td>SI</td>
                            <td>GSL</td>
                        </tr>
                        <tr>
                            <td>Ukraine</td>
                            <td>UA</td>
                            <td>GUA</td>
                        </tr>
                        <tr>
                            <td>Hungary</td>
                            <td>HU</td>
                            <td>GHU</td>
                        </tr>
                        <tr>
                            <td>Croatia</td>
                            <td>HR</td>
                            <td>GCR</td>
                        </tr>
                        <tr>
                            <td>Romania</td>
                            <td>RO</td>
                            <td>GRO</td>
                        </tr>
                        <tr>
                            <td>Bulgaria</td>
                            <td>BG</td>
                            <td>GBU</td>
                        </tr>
                        <tr>
                            <td>Kazakhstan</td>
                            <td>KZ</td>
                            <td>GKA</td>
                        </tr>
                        <tr>
                            <td>Russia</td>
                            <td>RU</td>
                            <td>GMO</td>
                        </tr>
                        <tr>
                            <td>Belarus</td>
                            <td>BY</td>
                            <td>GMO-BE</td>
                        </tr>
                        <tr>
                            <td>South Africa</td>
                            <td>ZA</td>
                            <td>GZA</td>
                        </tr>
                        <tr>
                            <td>Kenya</td>
                            <td>KE</td>
                            <td>GKE</td>
                        </tr>
                        <tr>
                            <td>Ghana</td>
                            <td>GH</td>
                            <td>GGH</td>
                        </tr>
                        <tr>
                            <td>Australia</td>
                            <td>AU</td>
                            <td>GPA</td>
                        </tr>
                        <tr>
                            <td>New Zealand</td>
                            <td>NZ</td>
                            <td>GNZ</td>
                        </tr>
                        <tr>
                            <td>South Korea</td>
                            <td>KR</td>
                            <td>GPK</td>
                        </tr>
                        <tr>
                            <td>Japan</td>
                            <td>JP</td>
                            <td>GJK</td>
                        </tr>
                        <tr>
                            <td>Philippines</td>
                            <td>PH</td>
                            <td>GPP</td>
                        </tr>
                        <tr>
                            <td>China</td>
                            <td>CH</td>
                            <td>GSH</td>
                        </tr>
                        <tr>
                            <td>Taiwan</td>
                            <td>TW</td>
                            <td>GTS</td>
                        </tr>
                        <tr>
                            <td>India</td>
                            <td>IN</td>
                            <td>GIN</td>
                        </tr>
                        <tr>
                            <td>Vietnam</td>
                            <td>VN</td>
                            <td>GPV</td>
                        </tr>
                        <tr>
                            <td>Thailand</td>
                            <td>TH</td>
                            <td>GTH</td>
                        </tr>
                        <tr>
                            <td>Malaysia</td>
                            <td>MY</td>
                            <td>GPM</td>
                        </tr>
                        <tr>
                            <td>Hong Kong</td>
                            <td>HK</td>
                            <td>GHK</td>
                        </tr>
                        <tr>
                            <td>Singapore</td>
                            <td>SG</td>
                            <td>GSI</td>
                        </tr>
                        <tr>
                            <td>Indonesia</td>
                            <td>ID</td>
                            <td>GAS</td>
                        </tr>
                        <tr>
                            <td>Argentina</td>
                            <td>AR</td>
                            <td>BGA</td>
                        </tr>
                        <tr>
                            <td>Brazil</td>
                            <td>BR</td>
                            <td>GBR</td>
                        </tr>
                        <tr>
                            <td>Chile</td>
                            <td>CL</td>
                            <td>BGC</td>
                        </tr>
                        <tr>
                            <td>Colombia</td>
                            <td>CO</td>
                            <td>GCO</td>
                        </tr>
                        <tr>
                            <td>Peru</td>
                            <td>-</td>
                            <td>GPE</td>
                        </tr>
                        <tr>
                            <td>United States</td>
                            <td>US</td>
                            <td>GPU</td>
                        </tr>
                        <tr>
                            <td>Canada</td>
                            <td>CA</td>
                            <td>GCA</td>
                        </tr>
                        <tr>
                            <td>Canada</td>
                            <td>CA/FR</td>
                            <td>GCA</td>
                        </tr>
                        <tr>
                            <td>Mexico</td>
                            <td>MX</td>
                            <td>GMX</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <script>
        const localLanguages = {
            "en-GB": ["en-GB", "ie/en", "gb/en", "my/en", "hk/en", "id/en", "ph/en", "in/en", "sg/en", "gh/en", "eg/en", "al/en", "sa/en", "ke/en", "ae/en", "za/en", "www/en"],
            "bs-BS": ["ba/bs"],
            "bg-BG": ["bg/bg"],
            "hr-HR": ["hr/hr"],
            "cs-CZ": ["cz/cs"],
            "da-DK": ["dk/da"],
            "et-EE": ["ee/et"],
            "fi-FI": ["fi/fi"],
            "el-GR": ["gr/el"],
            "hu-HU": ["hu/hu"],
            "it-IT": ["it/it"],
            "ja-JP": ["jp/ja"],
            "ko-KR": ["kr/ko"],
            "lv-LV": ["lv/lv"],
            "lt-LT": ["lt/lt"],
            "no-NO": ["no/no"],
            "pl-PL": ["pl/pl"],
            "ro-RO": ["ro/ro"],
            "ru-RU": ["ru/ru"],
            "sr-RS": ["rs/sr"],
            "sk-SK": ["sk/sk"],
            "sl-SI": ["si/sl"],
            "sv-SE": ["se/sv"],
            "th-TH": ["th/th"],
            "tr-TR": ["tr/tr"],
            "uk-UA": ["ua/uk"],
            "vi-VI": ["vn/vi"],
            "en-AU": ["en-AU", "au/en", "nz/en"],
            "en-US": ["en-US", "us/en", "ca/en"],
            "de-DE": ["de-DE", "de/de", "at/de", "ch/de"],
            "fr-FR": ["fr-FR", "fr/fr", "ca/fr", "ch/fr", "be/fr"],
            "pt-PT": ["pt-PT", "pt/pt", "br/pt"],
            "es-ES": ["es-ES", "es/es", "cl/es", "co/es", "ar/es", "mx/es"],
            "nl-NL": ["nl-NL", "nl/nl", "be/nl"],
            "ru-RU": ["ru-RU", "ru/ru", "by/ru", "kz/ru"],
            "zh-CN": ["zh-CN", "cn/zh", "tw/zh"],
        };
        const languageMapping = {
            Global: ["www/en"],
            GB: ["gb/en"],
            GSV: ["se/sv"],
            GDK: ["dk/da"],
            GNO: ["no/no"],
            GSF: ["fi/fi"],
            GWS: ["de/de"],
            GPO: ["at/de"],
            GPS_DE: ["ch/de"],
            GPS_FR: ["ch/fr"],
            GFD: ["fr/fr"],
            GBL_FR: ["be/fr"],
            GBL_NL: ["be/nl"],
            GNL: ["nl/nl"],
            BGE: ["es/es"],
            BGP: ["pt/pt"],
            GPH: ["gr/el"],
            GPL: ["pl/pl"],
            GCZ: ["cz/cs"],
            GSK: ["sk/sk"],
            GLA_LV: ["lv/lv"],
            GLA_LT: ["lt/lt"],
            GLA_EE: ["ee/et"],
            GGD: ["ae/en"],
            GSA: ["sa/en"],
            GEG: ["eg/en"],
            GTR: ["tr/tr"],
            GSE: ["rs/sr"],
            GSE_AL: ["al/en"],
            GBH: ["ba/bs"],
            GSL: ["si/sl"],
            GUA: ["ua/uk"],
            GHU: ["hu/hu"],
            GCR: ["hr/hr"],
            GRO: ["ro/ro"],
            GBU: ["bg/bg"],
            GKA: ["kz/ru"],
            GMO: ["ru/ru"],
            GMO_BE: ["by/ru"],
            GZA: ["za/en"],
            GKE: ["ke/en"],
            GGH: ["gh/en"],
            GPA: ["au/en"],
            GNZ: ["nz/en"],
            GPK: ["kr/ko"],
            GJK: ["jp/ja"],
            GPP: ["ph/en"],
            GSH: ["cn/zh"],
            GTS: ["tw/zh"],
            GIN: ["in/en"],
            GPV: ["vn/vi"],
            GTH: ["th/th"],
            GPM: ["my/en"],
            GHK: ["hk/en"],
            GSI: ["sg/en"],
            GAS: ["id/en"],
            BGA: ["ar/es"],
            GBR: ["br/pt"],
            BGC: ["cl/es"],
            GCO: ["co/es"],
            GPU: ["us/en"],
            GCA: ["ca/en"],
            GCA_FR: ["ca/fr"],
            GMX: ["mx/es"],
        };
        document.querySelectorAll(".floating-btn").forEach((btn) => {
            btn.addEventListener("click", () => {
                const targetId = btn.dataset.target;
                const panel = document.getElementById(targetId);
                if (panel) {
                    panel.classList.toggle("show");
                    savePanelShowState(targetId, panel.classList.contains("show"));

                    updateActiveButtons();


                    if (targetId === "savedCustomInputs" && panel.classList.contains("show")) {
                        loadSavedInputsFromStorage();
                    }
                }
            });
        });
        function updateActiveButtons() {
            document.querySelectorAll(".floating-btn").forEach((btn) => {
                const panelId = btn.dataset.target;
                const panel = document.getElementById(panelId);
                if (panel && panel.classList.contains("show")) {
                    btn.classList.add("active");
                } else {
                    btn.classList.remove("active");
                }
            });
        }
        function savePanelShowState(panelId, isShown) {
            let panelsState = JSON.parse(localStorage.getItem("panelsShowState") || "{}");
            panelsState[panelId] = isShown;
            localStorage.setItem("panelsShowState", JSON.stringify(panelsState));
        }
        window.addEventListener("DOMContentLoaded", () => {
            const panelsState = JSON.parse(localStorage.getItem("panelsShowState") || "{}");
            for (const [panelId, isShown] of Object.entries(panelsState)) {
                const panel = document.getElementById(panelId);
                if (panel) {
                    if (isShown) {
                        panel.classList.add("show");
                    } else {
                        panel.classList.remove("show");
                    }
                }
            }
            updateActiveButtons();

        });
        document.getElementById("generateAndSaveBtn").addEventListener("click", async function () {
            const customInput = document.getElementById("customInput").value.trim();
            if (!customInput) return;
            await generateLinks();
            processAndAddCustomInput();
            const container = document.getElementById("radioContainer");
        });
        function saveSelectedInput(input) {
            localStorage.setItem("selectedInput", input);
        }
        function getSelectedInput() {
            return localStorage.getItem("selectedInput") || "";
        }
        const fixedMasterCodes = ["zh-CN", "da-DK", "fr-FR", "de-DE", "hu-HU", "es-ES", "sr-RS"];
        const fixedContainer = document.getElementById("fixedMasterCodes");
        fixedMasterCodes.forEach((code) => {
            const button = document.createElement("button");
            button.textContent = code;
            button.style.backgroundColor = "#fff";
            button.style.border = "1px solid #007bff";
            button.style.padding = "10px 0.5vw";
            button.style.color = "#007bff";
            button.style.borderRadius = "5px";
            button.style.cursor = "pointer";
            button.onclick = function () {
                document.getElementById("masterLanguage").value = code;
                updateLocalLanguages();
            };
            fixedContainer.appendChild(button);
            button.onmouseover = function () {
                button.style.backgroundColor = "#007bff";
                button.style.color = "#fff";
            };
            button.onmouseout = function () {
                button.style.backgroundColor = "#fff";
                button.style.color = "#007bff";
            };
        });
        window.clearRadioSelections = function () {
            const RadioSelections = document.getElementById("savedCustomInputs");
            const container = document.getElementById("radioContainer");
            const clearBtn = document.getElementById("clearSavedLinksBtn");
            if (RadioSelections) RadioSelections.style.display = "none";
            if (container) container.innerHTML = "";
            if (clearBtn) clearBtn.style.display = "none";
            localStorage.removeItem("savedInputs");
            localStorage.removeItem("selectedInput");
            if (typeof links !== "undefined") links.innerHTML = "";
        };
        function processAndAddCustomInput() {
            let input = document.getElementById("customInput").value.trim();
            if (input !== lastGeneratedInput) {
                alert("Please generate links for this input before saving!");
                return;
            }
            let savedInputs = JSON.parse(localStorage.getItem("savedInputs")) || [];
            if (savedInputs.includes(input)) return;
            if (input) {
                savedInputs.push(input);
                localStorage.setItem("savedInputs", JSON.stringify(savedInputs));
                saveSelectedInput(input);
                const container = document.getElementById("radioContainer");
                if (!container) {
                    alert("Cannot find container to save radio input.");
                    return;
                }
                addSavedInputToDOM(input, container, true);
                document.getElementById("customInput").value = input;
                masterLanguage.disabled = false;
                const clearBtn = document.getElementById("clearSavedLinksBtn");
                if (clearBtn) clearBtn.style.display = "block";
                showOnlyDeleteButtonFor(input);
                const savedBox = document.getElementById("savedCustomInputs");
                if (savedBox && (savedBox.style.display === "none" || savedBox.style.display === "")) {
                    savedBox.style.display = "block";
                }
            }
        }
        function addSavedInputToDOM(input, container, checked = false) {
            const div = document.createElement("div");
            div.style.display = "flex";
            div.style.alignItems = "center";
            div.style.justifyContent = "space-between";
            const label = document.createElement("label");
            label.style.flex = "1";
            const radio = document.createElement("input");
            radio.type = "radio";
            radio.name = "savedInput";
            radio.value = input;
            radio.checked = checked;
            radio.onchange = function () {
                updateCustomInput(radio);
                showOnlyDeleteButtonFor(radio.value);
                saveSelectedInput(radio.value);
            };
            label.appendChild(radio);
            label.append(` ${input}`);
            const deleteBtn = document.createElement("button");
            deleteBtn.innerText = "‚ùå";
            deleteBtn.onclick = () => deleteSavedInput(input);
            deleteBtn.style.marginLeft = "10px";
            deleteBtn.style.background = "none";
            deleteBtn.style.border = "none";
            deleteBtn.style.color = "red";
            deleteBtn.style.cursor = "pointer";
            deleteBtn.style.display = "none";
            deleteBtn.className = "delete-btn";
            div.appendChild(label);
            div.appendChild(deleteBtn);
            container.appendChild(div);
            const allDivs = container.querySelectorAll("div");
            allDivs.forEach((el, index) => {
                el.style.paddingBottom = index === allDivs.length - 1 ? "0px" : "10px";
            });
        }
        function loadSavedInputsFromStorage() {
            const container = document.getElementById("radioContainer");
            if (!container) return;
            container.innerHTML = "";
            let savedInputs = JSON.parse(localStorage.getItem("savedInputs") || "[]");
            if (savedInputs.length === 0) {
                container.innerHTML = "<p>No saved inputs found.</p>";
                return;
            }
            const selectedInput = localStorage.getItem("selectedInput") || "";
            savedInputs.forEach((input) => {
                const isChecked = input === selectedInput;
                addSavedInputToDOM(input, container, isChecked);
            });
        }
        function updateCustomInput(radio) {
            const input = document.getElementById("customInput");
            input.value = radio.value;
            if (input.value !== lastGeneratedInput) {
                generateLinks();
            }
            showOnlyDeleteButtonFor(radio.value);
            setTimeout(() => {
                if (radio.value !== input.value) {
                    radio.value = input.value;
                }
            }, 0);
            let savedInputs = JSON.parse(localStorage.getItem("savedInputs")) || [];
            const index = savedInputs.indexOf(radio.value);
            if (index === -1) {
                savedInputs.push(radio.value);
            } else {
                savedInputs[index] = radio.value;
            }
            localStorage.setItem("savedInputs", JSON.stringify(savedInputs));
            saveSelectedInput(radio.value);
        }
        function showOnlyDeleteButtonFor(selectedValue) {
            const container = document.getElementById("radioContainer");
            const divs = container.querySelectorAll("div");
            divs.forEach((div) => {
                const radio = div.querySelector('input[type="radio"]');
                const btn = div.querySelector(".delete-btn");
                if (radio && btn) {
                    btn.style.display = radio.value === selectedValue && radio.checked ? "inline" : "none";
                }
            });
        }
        window.deleteSavedInput = function (value) {
            let savedInputs = JSON.parse(localStorage.getItem("savedInputs")) || [];
            const indexToRemove = savedInputs.indexOf(value);
            const isCurrentSelected = getSelectedInput() === value;
            savedInputs = savedInputs.filter((input) => input !== value);
            localStorage.setItem("savedInputs", JSON.stringify(savedInputs));
            const container = document.getElementById("radioContainer");
            container.innerHTML = "";
            let newSelectedInput = getSelectedInput();
            if (isCurrentSelected) {
                if (savedInputs.length > 0) {
                    const newIndex = Math.max(0, indexToRemove - 1);
                    newSelectedInput = savedInputs[newIndex];
                    saveSelectedInput(newSelectedInput);
                } else {
                    newSelectedInput = "";
                    localStorage.removeItem("selectedInput");
                }
            }
            savedInputs.forEach((input) => {
                const isChecked = input === newSelectedInput;
                addSavedInputToDOM(input, container, isChecked);
            });
            if (savedInputs.length === 0) {
                container.style.display = "none";
                document.getElementById("clearSavedLinksBtn").style.display = "none";
                document.getElementById("masterLanguage").disabled = true;
                document.getElementById("customInput").value = "";
            } else {
                document.getElementById("customInput").value = newSelectedInput;
                generateLinks();
                showOnlyDeleteButtonFor(newSelectedInput);
                document.getElementById("masterLanguage").disabled = false;
                document.getElementById("clearSavedLinksBtn").style.display = "block";
            }
        };
        window.onload = function () {
            const savedInputs = JSON.parse(localStorage.getItem("savedInputs")) || [];
            const selected = getSelectedInput();
            const container = document.getElementById("radioContainer");
            const masterLanguage = document.getElementById("masterLanguage");
            const clearBtn = document.getElementById("clearSavedLinksBtn");
            if (savedInputs.length > 0) {
                masterLanguage.disabled = false;
                savedInputs.forEach((input) => {
                    addSavedInputToDOM(input, container, input === selected);
                });
                const input = selected || savedInputs[savedInputs.length - 1];
                document.getElementById("customInput").value = input;
                generateLinks();
                clearBtn.style.display = "block";
                showOnlyDeleteButtonFor(input);
            } else {
                masterLanguage.disabled = true;
                clearBtn.style.display = "none";
            }
            const panel = document.getElementById("languageSection");
            if (panel) {
                panel.classList.add("show");
            }
        };
        function generateLinksFromInput(input) {
            return input.split("?")[0];
        }
        document.getElementById("customInput").addEventListener("input", function () {
            let inputValue = this.value;
            if (inputValue.startsWith("/")) {
                inputValue = inputValue.substring(1);
            }
            const baseUrls = ["https://author-grundfos-prod-65.adobecqms.net/", "https://www.grundfos.com/", "https://product-selection.grundfos.com/"];
            const customUrl = "https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/language-masters/en-GB/";
            let isValid = baseUrls.some((url) => inputValue.startsWith(url));
            let finalUrl = isValid || inputValue.startsWith(customUrl) ? inputValue : customUrl + inputValue;
            console.log("Final URL:", finalUrl);
        });
        const openModalButton = document.getElementById("openModalButton");
        const modal = document.getElementById("modal");
        const closeModalButton = document.getElementById("closeModalButton");
        openModalButton.onclick = function () {
            modal.style.display = "block";
        };
        closeModalButton.onclick = function () {
            modal.style.display = "none";
        };
        window.onclick = function (event) {
            if (event.target === modal) {
                modal.style.display = "none";
            }
        };
        function toggleSearchInput() {
            const searchContainer = document.getElementById("searchContainer");
            const button = document.getElementById("toggleSearchButton");
            if (searchContainer.style.display === "none") {
                searchContainer.style.display = "block";
                button.textContent = "Hide Search Input";
            } else {
                searchContainer.style.display = "none";
                button.textContent = "Show Search Input";
            }
        }
        function handleInputSearch() {
            const searchInput = document.getElementById("searchInput").value.toUpperCase().trim();
            document.getElementById("masterLanguageInfo").textContent = "Master Language: ";
            document.getElementById("localLanguagesInfo").textContent = "Local Languages: ";
            if (languageMapping[searchInput]) {
                const localLang = languageMapping[searchInput][0];
                let found = false;
                for (const masterLang in localLanguages) {
                    if (localLanguages[masterLang].includes(localLang)) {
                        document.getElementById("masterLanguageInfo").textContent = "Master Language: " + masterLang;
                        document.getElementById("localLanguagesInfo").textContent = "Local Languages: " + localLang;
                        found = true;
                        break;
                    }
                }
                if (!found) {
                    document.getElementById("masterLanguageInfo").textContent = "Master Language: Not Found";
                    document.getElementById("localLanguagesInfo").textContent = "Local Languages: Not Found";
                }
            } else {
                document.getElementById("masterLanguageInfo").textContent = "Master Language: Not Found";
                document.getElementById("localLanguagesInfo").textContent = "Local Languages: Not Found";
            }
        }
        function applySearchInput() {
            const searchInput = document.getElementById("searchInput").value.toUpperCase().trim();
            const customInput = document.getElementById("customInput").value.trim();
            if (!customInput) {
                alert("Please enter data into the customInput before proceeding.");
                return;
            }
            if (!searchInput) {
                alert("Please enter data into the Search Language before proceeding.");
                return;
            }
            if (languageMapping[searchInput]) {
                const localLang = languageMapping[searchInput][0];
                let found = false;
                for (const masterLang in localLanguages) {
                    if (localLanguages[masterLang].includes(localLang)) {
                        const masterSelect = document.getElementById("masterLanguage");
                        const options = masterSelect.getElementsByTagName("option");
                        for (let option of options) {
                            if (option.value === masterLang) {
                                option.selected = true;
                                break;
                            }
                        }
                        updateLocalLanguages1(localLanguages[masterLang]);
                        const localCheckboxToSelect = document.querySelector(`#localLanguages input[type="checkbox"][value="${localLang}"]`);
                        if (localCheckboxToSelect) {
                            localCheckboxToSelect.checked = true;
                        }
                        generateLinks();
                        found = true;
                        break;
                    }
                }
                if (!found) {
                    document.getElementById("masterLanguage").selectedIndex = 0;
                    document.getElementById("localLanguages").innerHTML = "";
                    const localCheckboxes = document.querySelectorAll('#localLanguages input[type="checkbox"]');
                    localCheckboxes.forEach((checkbox) => (checkbox.checked = false));
                }
            } else {
                document.getElementById("masterLanguage").selectedIndex = 0;
                document.getElementById("localLanguages").innerHTML = "";
                const localCheckboxes = document.querySelectorAll('#localLanguages input[type="checkbox"]');
                localCheckboxes.forEach((checkbox) => (checkbox.checked = false));
            }
        }
        function generateLanguageSuggestions() {
            const inputURL = document.getElementById("customInput").value.trim();
            const masterSelect = document.getElementById("masterLanguage");
            if (!inputURL) {
                alert("Please provide a valid URL.");
                return;
            }
            const languagePattern = /https:\/\/(?:www|product-selection)\.grundfos\.com\/([a-z]{2})\//;
            const languageMastersPattern = /.*?\/content\/grundfos\/language-masters\/([a-z]{2}-[A-Z]{2})/;
            const nonLanguageMastersPattern = /.*?\/content\/grundfos\/([a-z]{2})\/([a-z]{2})\//;
            let languageCode = null;
            const matchLanguage = inputURL.match(languagePattern);
            if (matchLanguage) {
                languageCode = matchLanguage[1];
            } else if (inputURL.match(languageMastersPattern)) {
                const matchLanguageMasters = inputURL.match(languageMastersPattern);
                languageCode = matchLanguageMasters[1];
                if (languageCode) {
                    masterSelect.value = languageCode;
                    updateLocalLanguages([]);
                    return;
                }
            } else {
                const matchNonLanguageMasters = inputURL.match(nonLanguageMastersPattern);
                if (matchNonLanguageMasters) {
                    const countryCode = matchNonLanguageMasters[1];
                    const languageCodeSuffix = matchNonLanguageMasters[2];
                    for (const [master, locals] of Object.entries(localLanguages)) {
                        const languageCode = `${countryCode}/${languageCodeSuffix}`;
                        if (locals.includes(languageCode)) {
                            masterSelect.value = master;
                            updateLocalLanguages([]);
                            return;
                        }
                    }
                } else {
                    languageCode = "www/en";
                    masterSelect.value = "en-GB";
                    updateLocalLanguages([]);
                }
            }
            if (!languageCode) {
                alert("Can't find your language code in the URL!");
                return;
            }
            let matchedLocals = [];
            let fullMatchFound = false;
            for (const [master, locals] of Object.entries(localLanguages)) {
                const localMatches = locals.filter((local) => local.startsWith(languageCode + "/"));
                if (localMatches.length > 0) {
                    matchedLocals = matchedLocals.concat(localMatches);
                }
            }
            let prioritizedLocals = matchedLocals.filter((local) => local === `${languageCode}/${languageCode}`);
            if (prioritizedLocals.length === 0) {
                prioritizedLocals = matchedLocals.sort((a, b) => {
                    if (a.includes("/nl") && !b.includes("/nl")) return -1;
                    if (a.includes("/fr") && !b.includes("/fr")) return -1;
                    return 0;
                });
            }
            let prioritizedMasters = [];
            for (let i = 0; i < prioritizedLocals.length; i++) {
                const local = prioritizedLocals[i];
                for (const [master, locals] of Object.entries(localLanguages)) {
                    if (locals.includes(local)) {
                        if (!prioritizedMasters.includes(master)) {
                            prioritizedMasters.push(master);
                        }
                        break;
                    }
                }
            }
            let sortedMasters = prioritizedMasters.sort((a, b) => {
                if (a === "nl-NL" && b !== "nl-NL") return -1;
                if (b === "nl-NL" && a !== "nl-NL") return 1;
                if (a === "en-US" && b !== "en-US") return -1;
                if (b === "en-US" && a !== "en-US") return 1;
                if (a === "de-DE" && b !== "de-DE") return -1;
                if (b === "de-DE" && a !== "de-DE") return 1;
                if (a === "fr-FR" && b !== "fr-FR") return -1;
                if (b === "fr-FR" && a !== "fr-FR") return 1;
                return 0;
            });
            if (prioritizedMasters.length > 0) {
                const selectedMaster = sortedMasters[0];
                masterSelect.value = selectedMaster;
                updateLocalLanguages(prioritizedLocals);
                generateLinksForCondition3();
                generateLinks();
            }
        }
        function updateLocalLanguages() {
            const masterLanguage = document.getElementById("masterLanguage").value;
            const localLanguagesDiv = document.getElementById("localLanguages");
            localLanguagesDiv.innerHTML = "";
            if (localLanguages[masterLanguage]) {
                localLanguages[masterLanguage].forEach((code, index) => {
                    const checkbox = document.createElement("input");
                    checkbox.type = "checkbox";
                    checkbox.id = code;
                    checkbox.value = code;
                    checkbox.onchange = handleLocalLanguageChange;
                    const label = document.createElement("label");
                    label.setAttribute("for", code);
                    label.textContent = code;
                    localLanguagesDiv.appendChild(checkbox);
                    localLanguagesDiv.appendChild(label);
                    localLanguagesDiv.appendChild(document.createElement("br"));
                    if (index === 0) {
                        checkbox.checked = true;
                        checkbox.dispatchEvent(new Event("change"));
                        checkbox.disabled = false;
                    } else {
                        checkbox.disabled = true;
                        checkbox.dispatchEvent(new Event("change"));
                    }
                });
            }
            applyDisabledStyles();
        }
        function updateLocalLanguages1() {
            const masterLanguage = document.getElementById("masterLanguage").value;
            const localLanguagesDiv = document.getElementById("localLanguages");
            localLanguagesDiv.innerHTML = "";
            if (localLanguages[masterLanguage]) {
                localLanguages[masterLanguage].forEach((code, index) => {
                    const checkbox = document.createElement("input");
                    checkbox.type = "checkbox";
                    checkbox.id = code;
                    checkbox.value = code;
                    checkbox.onchange = handleLocalLanguageChange;
                    const label = document.createElement("label");
                    label.setAttribute("for", code);
                    label.textContent = code;
                    localLanguagesDiv.appendChild(checkbox);
                    localLanguagesDiv.appendChild(label);
                    localLanguagesDiv.appendChild(document.createElement("br"));
                });
            }
            applyDisabledStyles();
        }
        function applyDisabledStyles() {
            const checkboxes = document.querySelectorAll('#localLanguages input[type="checkbox"]');
            checkboxes.forEach((checkbox) => {
                const label = checkbox.nextElementSibling;
                if (checkbox.disabled) {
                    label.style.opacity = "0.5";
                    label.style.pointerEvents = "none";
                } else {
                    label.style.opacity = "1";
                    label.style.pointerEvents = "auto";
                }
            });
        }
        function handleLocalLanguageChange() {
            const checkboxes = document.querySelectorAll('#localLanguages input[type="checkbox"]');
            const firstCheckbox = checkboxes[0];
            if (firstCheckbox.checked) {
                checkboxes.forEach((checkbox, index) => {
                    if (index > 0) {
                        checkbox.disabled = true;
                        checkbox.checked = false;
                    }
                });
            } else {
                checkboxes.forEach((checkbox, index) => {
                    if (index > 0) {
                        checkbox.disabled = false;
                    }
                });
            }
            applyDisabledStyles();
            const selectedLocalLanguages = Array.from(document.querySelectorAll('#localLanguages input[type="checkbox"]:checked')).map((checkbox) => checkbox.value);
            currentLocalLanguages = selectedLocalLanguages;
            generateLinksForCondition3();
            generateLinks();
        }
        function removeDuplicateLinks(linksDiv) {
            const linkElements = linksDiv.querySelectorAll("p a");
            const seenURLs = new Set();
            const paragraphs = Array.from(linksDiv.getElementsByTagName("p")).sort((a, b) => {
                const textA = a.textContent.trim().toLowerCase();
                const textB = b.textContent.trim().toLowerCase();
            });
            paragraphs.forEach((p) => linksDiv.appendChild(p));
            linkElements.forEach((linkElement) => {
                const url = linkElement.href.trim();
                if (seenURLs.has(url)) {
                    const parentParagraph = linkElement.closest("p");
                    if (parentParagraph) {
                        parentParagraph.remove();
                    }
                } else {
                    seenURLs.add(url);
                }
            });
        }
        function generateLinks() {
            const masterLanguage = document.getElementById("masterLanguage").value;
            const customInputEl = document.getElementById("customInput");
            const fragmentInput = document.getElementById("fragmentInput").value;
            const linksDiv = document.getElementById("links");
            const conditions = Array.from(document.querySelectorAll('input[name="condition"]:checked')).map(cb => cb.value);
            const checkboxes = document.querySelectorAll('#localLanguages input[type="checkbox"]:checked');
            const localLanguagesChecked = Array.from(checkboxes).map((cb) => cb.value);
            linksDiv.innerHTML = "";
            let input = customInputEl.value.trim();
            let result = extractPathFromUrl(input);
            result = cleanUpPath(result);
            customInputEl.value = result;
            lastGeneratedInput = result;
            conditions.forEach(condition => {
                switch (condition) {
                    case "radio1":
                        generateLinksForCondition1(masterLanguage, localLanguagesChecked, result, linksDiv);
                        break;
                    case "radio2":
                        generateLinksForCondition2(masterLanguage, localLanguagesChecked, result, linksDiv);
                        break;
                    case "radio3":
                        generateLinksForCondition3();
                        break;
                    case "radio4":
                        generateLinksForCondition4(masterLanguage, localLanguagesChecked, fragmentInput, linksDiv);
                        break;
                }
            });
            console.log("Generated input:", lastGeneratedInput);
        }
        function extractPathFromUrl(url) {
            const mappings = [
                { old: "products", new: "solutions" },
                { old: "learn", new: "solutions/learn" },
                { old: "support", new: "solutions/support" },
                { old: "about-us/sustainability", new: "sustainability" },
                { old: "about-us/media", new: "media" },
                { old: "about-us/careers", new: "careers" },
            ];
            url = url.split("?")[0];
            const lmIndex = url.indexOf("language-masters/");
            if (lmIndex !== -1) {
                let path = url.substring(lmIndex + "language-masters/".length);
                const firstSlashIndex = path.indexOf("/");
                return firstSlashIndex !== -1 ? path.substring(firstSlashIndex + 1) : path;
            }
            const grundfosMatch = url.match(/^.*grundfos\/([^/]+\/[^/]+\/.*)/);
            if (grundfosMatch) {
                let path = grundfosMatch[1];
                if (url.includes("www/en")) {
                    mappings.forEach(({ old, new: n }) => {
                        if (!(path.includes("solutions/learn/") && old === "products")) {
                            if (path.includes(old)) path = path.replace(old, n);
                        }
                    });
                } else {
                    mappings.forEach(({ old, new: n }) => {
                        if (!(path.includes("solutions/learn/") && old === "products")) {
                            if (path.includes(n)) path = path.replace(n, old);
                        }
                    });
                }
                return path;
            }
            const domainPattern = /https:\/\/(www|product-selection)\.grundfos\.com\/([a-z]{2})\//;
            const match = url.match(domainPattern);
            if (match) {
                const regionCode = match[2];
                const regionIndex = url.indexOf(regionCode) + regionCode.length + 1;
                let path = url.substring(regionIndex);
                if (url.includes("product-selection")) {
                    path = "products/" + path;
                }
                return path;
            }
            let baseIndex = url.indexOf("www.grundfos.com/") !== -1 ? url.indexOf("www.grundfos.com/") : url.indexOf("product-selection.grundfos.com/");
            if (baseIndex !== -1) {
                let path = url.substring(baseIndex + (url.indexOf("www.grundfos.com/") !== -1 ? "www.grundfos.com/".length : "product-selection.grundfos.com/".length));
                if (url.includes("product-selection.grundfos.com/")) {
                    path = "products/" + path;
                }
                mappings.forEach(({ old, new: n }) => {
                    if (!(path.includes("solutions/learn/") && old === "products")) {
                        if (path.includes(n)) path = path.replace(n, old);
                    }
                });
                return path;
            }
            return url;
        }
        function cleanUpPath(path) {
            if (path.endsWith(".html")) path = path.slice(0, -5);
            if (path.endsWith("/")) path = path.slice(0, -1);
            if (path.startsWith("/")) path = path.slice(1);
            return path;
        }
        function generateAdditionalLinks(masterLanguage, localLanguage, customInput, localLanguages, liveSiteLanguage, linksDiv) {
            let linksHTML = "";
            let result = "";
            let baseUrl = customInput;
            if (typeof customInput !== "string") {
                return;
            }
            const questionMarkIndex = customInput.indexOf("?");
            if (questionMarkIndex !== -1) {
                baseUrl = customInput.substring(0, questionMarkIndex);
            }
            const baseIndex = baseUrl.indexOf("language-masters/");
            if (baseIndex !== -1) {
                baseUrl = baseUrl.substring(baseIndex + "language-masters/".length);
                const firstSlashIndex = baseUrl.indexOf("/");
                if (firstSlashIndex !== -1) {
                    result = baseUrl.substring(firstSlashIndex + 1);
                } else {
                    result = baseUrl;
                }
                if (result.endsWith(".html")) {
                    result = result.slice(0, -5);
                }
                if (result.endsWith("/")) {
                    result = result.slice(0, -1);
                }
                if (result.startsWith("/")) {
                    result = result.slice(1);
                }
            }
            const replacements = [
                {
                    old: "products",
                    new: "solutions",
                },
                {
                    old: "learn",
                    new: "solutions/learn",
                },
                {
                    old: "support",
                    new: "solutions/support",
                },
                {
                    old: "about-us/sustainability",
                    new: "sustainability",
                },
                {
                    old: "about-us/media",
                    new: "media",
                },
                {
                    old: "about-us/careers",
                    new: "careers",
                },
            ];
            const linkMapping = {
                "products/industries": "https://www.grundfos.com/solutions/industries",
                "products/applications": "https://product-selection.grundfos.com/applications",
                "products/categories": "https://product-selection.grundfos.com/categories",
                "products/pumped-liquid-guide": "https://product-selection.grundfos.com/pumped-liquid-guide",
                "products/products": "https://product-selection.grundfos.com/products",
                products: "https://product-selection.grundfos.com/",
                "solutions/learn": "https://www.grundfos.com/solutions/learn",
                support: "https://www.grundfos.com/solutions/support",
                "about-us/sustainability": "https://www.grundfos.com/sustainability",
                "about-us/media": "https://www.grundfos.com/media",
                "about-us/careers": "https://www.grundfos.com/careers",
            };
            if (!baseUrl || baseUrl === "undefined") {
                return;
            }
            let linkBase = baseUrl;
            const checkboxes = document.querySelectorAll('#localLanguages input[type="checkbox"]:checked');
            const localLanguagesChecked = Array.from(checkboxes).map((checkbox) => checkbox.value);
            if (!Array.isArray(localLanguagesChecked)) {
                localLanguagesChecked = [];
            }
            const localLanguagesList = localLanguages[masterLanguage] || [];
            if (localLanguagesChecked.includes(masterLanguage)) {
                const remainingLanguages = localLanguagesList.filter((lang) => lang !== masterLanguage);
                let masterLanguageExists = false;
                let localLanguageExists = false;
                linksDiv.querySelectorAll("p").forEach((p) => {
                    if (p.querySelector("strong") && p.querySelector("strong").textContent.includes(`Master Language Selected (${masterLanguage})`)) {
                        masterLanguageExists = true;
                    }
                });
                if (!masterLanguageExists) {
                    if (remainingLanguages.length > 0) {
                        linksHTML += `<p><br><br><strong>Master Language Selected (${masterLanguage}):</strong> ${remainingLanguages.join(", ")}</p>`;
                    } else {
                        linksHTML += `<p><strong>Master Language Selected (${masterLanguage}):</strong> No additional locales available to display.</p>`;
                    }
                }
                remainingLanguages.forEach((language) => {
                    const localLinkEditorLocal = `https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/${language}/${linkBase}`;
                    const localLinkSitesLocal = `https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/${language}/${linkBase}`;
                    const localLinkDisabledLocal = `https://author-grundfos-prod-65.adobecqms.net/content/grundfos/${language}/${linkBase}?wcmmode=disabled`;
                    linksDiv.querySelectorAll("p").forEach((p) => {
                        if (p.querySelector("strong") && p.querySelector("strong").textContent.includes(`Local Language (${language})`)) {
                            localLanguageExists = true;
                        }
                    });
                    if (!localLanguageExists) {
                        linksHTML += `<p><strong>Local Language (${language}):</strong></p>`;
                    }
                    if (language === "www/en") {
                        let liveSiteLink = `https://www.grundfos.com/${baseUrl}`.replace(/\/{2,}/g, "/");
                        let modifiedLinkBase = linkBase;
                        replacements.forEach((replacement) => {
                            if (modifiedLinkBase.includes(replacement.old)) {
                                modifiedLinkBase = modifiedLinkBase.replace(replacement.old, replacement.new);
                            }
                        });
                        linksHTML += `<p>Site Live: <a href="https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/www/en/${modifiedLinkBase}" target="_blank">https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/www/en/${modifiedLinkBase}</a></p>
                                    <p>Editor: <a href="https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/www/en/${modifiedLinkBase}" target="_blank">https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/www/en/${modifiedLinkBase}</a></p>
                                    <p>Preview: <a href="https://author-grundfos-prod-65.adobecqms.net/content/grundfos/www/en/${modifiedLinkBase}?wcmmode=disabled" target="_blank">https://author-grundfos-prod-65.adobecqms.net/content/grundfos/www/en/${modifiedLinkBase}?wcmmode=disabled</a></p>`;
                        const originalLinkBase = linkBase;
                        let finalLink = null;
                        for (let key in linkMapping) {
                            if (linkMapping.hasOwnProperty(key) && originalLinkBase.includes(key)) {
                                finalLink = originalLinkBase.replace(key, linkMapping[key]);
                                break;
                            }
                        }
                        if (!finalLink) {
                            finalLink = `https://www.grundfos.com/${originalLinkBase}`;
                        }
                        linksHTML += `<p>Live Site Link: <a href="${finalLink}" target="_blank">${finalLink}</a></p>`;
                    } else {
                        let modifiedLinkBase = linkBase;
                        const localePrefix = language.split("/")[0];
                        const localeSuffix = language.split("/")[1];
                        const liveLink = `https://www.grundfos.com/${language.split("/")[0]}/${baseUrl}`;
                        let newLink = `https://www.grundfos.com/${baseUrl}`;
                        if (["ch/fr", "be/fr", "ca/fr"].includes(language)) {
                            newLink = `https://www.grundfos.com/${language}/${baseUrl}`;
                        } else {
                            newLink = `https://www.grundfos.com/${localePrefix}/${baseUrl}`;
                        }
                        if (newLink.includes("/products")) {
                            let originalLink = newLink;
                            if (originalLink.includes("https://www.grundfos.com/")) {
                                newLink = originalLink.replace("https://www.grundfos.com/", "https://product-selection.grundfos.com/").replace("/products", "");
                            }
                            if (originalLink.includes("https://www.grundfos.com/cn/")) {
                                newLink = originalLink.replace("https://www.grundfos.com/cn/", "https://product-selection.grundfos.cn/").replace("/products", "");
                            }
                            newLink = newLink.replace("/www/", "/");
                            newLink = newLink.replace("/gb/", "/uk/");
                            linksHTML += `<p>Site Live: <a href="${localLinkSitesLocal}" target="_blank">${localLinkSitesLocal}</a></p>`;
                            linksHTML += `<p>Editor: <a href="${localLinkEditorLocal}" target="_blank">${localLinkEditorLocal}</a></p>`;
                            linksHTML += `<p>Preview: <a href="${localLinkDisabledLocal}" target="_blank">${localLinkDisabledLocal}</a></p>`;
                            linksHTML += `<p>Live Site Link: <a href="${newLink}" target="_blank">${newLink}</a><br></p>`;
                        } else if (newLink.includes("solutions/learn")) {
                            newLink = newLink.replace("solutions/learn", "learn");
                            let updatedLinkBase = linkBase;
                            updatedLinkBase = updatedLinkBase.replace("solutions/learn", "learn");
                            linksHTML += `<p>Site Live: <a href="https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/${language}/${updatedLinkBase}" target="_blank">https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/${language}/${updatedLinkBase}</a></p>
                                    <p>Editor: <a href="https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/${language}/${updatedLinkBase}" target="_blank">https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/${language}/${updatedLinkBase}</a></p>
                                    <p>Preview: <a href="https://author-grundfos-prod-65.adobecqms.net/content/grundfos/${language}/${updatedLinkBase}?wcmmode=disabled" target="_blank">https://author-grundfos-prod-65.adobecqms.net/content/grundfos/${language}/${updatedLinkBase}?wcmmode=disabled</a></p>`;
                            linksHTML += `<p>Live Site Link: <a href="${newLink}" target="_blank">${newLink}</a><br></p>`;
                        } else {
                            let originalLink = newLink;
                            if (originalLink.includes("https://www.grundfos.com/cn/")) {
                                newLink = originalLink.replace("https://www.grundfos.com/cn/", "Https://www.grundfos.cn/").replace("/products", "");
                            }
                            newLink = newLink.replace("/www/", "/");
                            newLink = newLink.replace("/gb/", "/uk/");
                            linksHTML += `<p>Site Live: <a href="https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/${language}/${modifiedLinkBase}" target="_blank">https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/${language}/${modifiedLinkBase}</a></p>
                                    <p>Editor: <a href="https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/${language}/${modifiedLinkBase}" target="_blank">https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/${language}/${modifiedLinkBase}</a></p>
                                    <p>Preview: <a href="https://author-grundfos-prod-65.adobecqms.net/content/grundfos/${language}/${modifiedLinkBase}?wcmmode=disabled" target="_blank">https://author-grundfos-prod-65.adobecqms.net/content/grundfos/${language}/${modifiedLinkBase}?wcmmode=disabled</a></p>`;
                            linksHTML += `<p>Live Site Link: <a href="${newLink}" target="_blank">${newLink}</a><br></p>`;
                        }
                    }
                });
            } else if (localLanguagesChecked.length > 0) {
                let addedSelectedLanguages = false;
                const selectedLanguagesCount = Array.from(linksDiv.querySelectorAll("p")).filter((p) => p.innerHTML.includes("Selected Local Languages:")).length;
                if (selectedLanguagesCount === 0) {
                    const selectedLanguagesText = `<p><strong><br><br>Selected Local Languages:</strong> ${localLanguagesChecked.join(", ")}</p>`;
                    linksHTML += selectedLanguagesText;
                }
                linksDiv.querySelectorAll("p").forEach((p) => {
                    if (p.querySelector("strong") && p.querySelector("strong").textContent.includes(`Selected Local Languages:</strong> ${localLanguagesChecked.join(", ")}`)) {
                        localLanguageExists = true;
                    }
                });
                localLanguagesChecked.forEach((selectedLocalLanguage) => {
                    const localLinkEditorLocal = `https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/${selectedLocalLanguage}/${linkBase}`;
                    const localLinkSitesLocal = `https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/${selectedLocalLanguage}/${linkBase}`;
                    const localLinkDisabledLocal = `https://author-grundfos-prod-65.adobecqms.net/content/grundfos/${selectedLocalLanguage}/${linkBase}?wcmmode=disabled`;
                    let localLanguageExists = false;
                    linksDiv.querySelectorAll("p").forEach((p) => {
                        if (p.querySelector("strong") && p.querySelector("strong").textContent.includes(`Local Language (${selectedLocalLanguage})`)) {
                            localLanguageExists = true;
                        }
                    });
                    if (!localLanguageExists) {
                        linksHTML += `<p><strong>Local Language (${selectedLocalLanguage}):</strong></p>`;
                    }
                    if (selectedLocalLanguage === "www/en") {
                        let liveSiteLink = `https://www.grundfos.com/${baseUrl}`.replace(/\/{2,}/g, "/");
                        let updatedLinkBase = linkBase;
                        let modifiedLinkBase = updatedLinkBase;
                        replacements.forEach((replacement) => {
                            if (modifiedLinkBase.includes(replacement.old)) {
                                modifiedLinkBase = modifiedLinkBase.replace(replacement.old, replacement.new);
                            }
                        });
                        linksHTML += `<p>Site Live: <a href="https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/www/en/${modifiedLinkBase}" target="_blank">https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/www/en/${modifiedLinkBase}</a></p>
                                    <p>Editor: <a href="https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/www/en/${modifiedLinkBase}" target="_blank">https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/www/en/${modifiedLinkBase}</a></p>
                                    <p>Preview: <a href="https://author-grundfos-prod-65.adobecqms.net/content/grundfos/www/en/${modifiedLinkBase}?wcmmode=disabled" target="_blank">https://author-grundfos-prod-65.adobecqms.net/content/grundfos/www/en/${modifiedLinkBase}?wcmmode=disabled</a></p>`;
                        const originalLinkBase = linkBase;
                        let finalLink = null;
                        for (let key in linkMapping) {
                            if (linkMapping.hasOwnProperty(key) && originalLinkBase.includes(key)) {
                                finalLink = originalLinkBase.replace(key, linkMapping[key]);
                                break;
                            }
                        }
                        if (!finalLink) {
                            finalLink = `https://www.grundfos.com/${originalLinkBase}`;
                        }
                        linksHTML += `<p>Live Site Link: <a href="${finalLink}" target="_blank">${finalLink}</a></p>`;
                    } else {
                        linksHTML += `<p>Site Live: <a href="${localLinkSitesLocal}" target="_blank">${localLinkSitesLocal}</a></p>`;
                        linksHTML += `<p>Editor: <a href="${localLinkEditorLocal}" target="_blank">${localLinkEditorLocal}</a></p>`;
                        linksHTML += `<p>Preview: <a href="${localLinkDisabledLocal}" target="_blank">${localLinkDisabledLocal}</a></p>`;
                        const localePrefix = selectedLocalLanguage.split("/")[0];
                        const localeSuffix = selectedLocalLanguage.split("/")[1];
                        const liveLink = `https://www.grundfos.com/${selectedLocalLanguage.split("/")[0]}/${baseUrl}`;
                        let newLink = `https://www.grundfos.com/${baseUrl}`;
                        if (["ch/fr", "be/fr", "ca/fr"].includes(selectedLocalLanguage)) {
                            newLink = `https://www.grundfos.com/${selectedLocalLanguage}/${baseUrl}`;
                        } else {
                            newLink = `https://www.grundfos.com/${localePrefix}/${baseUrl}`;
                        }
                        if (newLink.includes("/products")) {
                            let originalLink = newLink;
                            if (originalLink.includes("https://www.grundfos.com/")) {
                                newLink = originalLink.replace("https://www.grundfos.com/", "https://product-selection.grundfos.com/").replace("/products", "");
                            }
                            if (originalLink.includes("https://www.grundfos.com/cn/")) {
                                newLink = originalLink.replace("https://www.grundfos.com/cn/", "https://product-selection.grundfos.cn/").replace("/products", "");
                            }
                            newLink = newLink.replace("/www/", "/");
                            newLink = newLink.replace("/gb/", "/uk/");
                            linksHTML += `<p>Live Site Link: <a href="${newLink}" target="_blank">${newLink}</a><br></p>`;
                        } else if (newLink.includes("solutions/learn")) {
                            newLink = newLink.replace("solutions/learn", "learn");
                            linksHTML += `<p>Live Site Link: <a href="${newLink}" target="_blank">${newLink}</a><br></p>`;
                        } else {
                            let originalLink = newLink;
                            if (originalLink.includes("https://www.grundfos.com/cn/")) {
                                newLink = originalLink.replace("https://www.grundfos.com/cn/", "https://www.grundfos.cn/");
                            }
                            newLink = newLink.replace("/www/", "/");
                            newLink = newLink.replace("/gb/", "/uk/");
                            linksHTML += `<p>Live Site Link: <a href="${newLink}" target="_blank">${newLink}</a><br></p>`;
                        }
                    }
                });
            } else {
                linksHTML += `<p><strong>No local languages selected.</strong></p>`;
            }
            return linksHTML;
        }
        function generateLinksForCondition1(masterLanguage, localLanguagesChecked, customInput, linksDiv) {
            const uniqueLinks = new Set();
            const uniqueTexts = new Set();
            let PartLinkExists = false;
            let MasterenGBExists = false;
            let MasterLocalExists = false;
            localLanguagesChecked.forEach((localLanguage) => {
                const parts = localLanguage.split("/");
                const liveSiteLanguage = parts[0];
                let linksHTML = ``;
                const editorLink = `https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/language-masters/${masterLanguage}/${customInput}`;
                const sitesLink = `https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/language-masters/${masterLanguage}/${customInput}`;
                const previewLink = `https://author-grundfos-prod-65.adobecqms.net/content/grundfos/language-masters/${masterLanguage}/${customInput}?wcmmode=disabled`;
                const editorLinkMaster = `https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/language-masters/en-GB/${customInput}`;
                const previewLinkMaster = `https://author-grundfos-prod-65.adobecqms.net/content/grundfos/language-masters/en-GB/${customInput}?wcmmode=disabled`;
                const sitesLinkMaster = `https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/language-masters/en-GB/${customInput}`;
                const liveLink = `https://www.grundfos.com/${liveSiteLanguage}/${customInput}`;
                if (!PartLinkExists) {
                    linksHTML = `<p class="link-part"><strong>Part of the link:</strong> "${customInput}"</p>`;
                    PartLinkExists = true;
                }
                if (masterLanguage === "en-GB") {
                    if (!MasterenGBExists) {
                        linksHTML += `<p><strong>Master Language:</strong> (en-GB)</p>`;
                        MasterenGBExists = true;
                    }
                    if (!uniqueLinks.has(sitesLinkMaster)) {
                        linksHTML += `<p><strong>Site Live (en_GB)</strong>: <a href="${sitesLinkMaster}" target="_blank">${sitesLinkMaster}</a></p>`;
                        uniqueLinks.add(sitesLinkMaster);
                    }
                    if (!uniqueLinks.has(editorLinkMaster)) {
                        linksHTML += `<p><strong>Editor (en_GB)</strong>: <a href="${editorLinkMaster}" target="_blank">${editorLinkMaster}</a></p>`;
                        uniqueLinks.add(editorLinkMaster);
                    }
                    if (!uniqueLinks.has(previewLinkMaster)) {
                        linksHTML += `<p><strong>Preview (en_GB)</strong>: <a href="${previewLinkMaster}" target="_blank">${previewLinkMaster}</a><br></p>`;
                        uniqueLinks.add(previewLinkMaster);
                    }
                } else {
                    if (!MasterenGBExists) {
                        linksHTML += `<p><strong>Master Language:</strong> (en-GB)</p>`;
                        MasterenGBExists = true;
                    }
                    if (!uniqueLinks.has(sitesLinkMaster)) {
                        linksHTML += `<p><strong>Site Live (en_GB)</strong>: <a href="${sitesLinkMaster}" target="_blank">${sitesLinkMaster}</a></p>`;
                        uniqueLinks.add(sitesLinkMaster);
                    }
                    if (!uniqueLinks.has(editorLinkMaster)) {
                        linksHTML += `<p><strong>Editor (en_GB)</strong>: <a href="${editorLinkMaster}" target="_blank">${editorLinkMaster}</a></p>`;
                        uniqueLinks.add(editorLinkMaster);
                    }
                    if (!uniqueLinks.has(previewLinkMaster)) {
                        linksHTML += `<p><strong>Preview (en_GB)</strong>: <a href="${previewLinkMaster}" target="_blank">${previewLinkMaster}</a><br></p>`;
                        uniqueLinks.add(previewLinkMaster);
                    }
                }
                if (masterLanguage !== "en-GB") {
                    if (!MasterLocalExists) {
                        linksHTML += `<p><strong>Master Language:</strong> (${masterLanguage})</p>`;
                        MasterLocalExists = true;
                    }
                    if (!uniqueLinks.has(sitesLink)) {
                        linksHTML += `<p><strong>Site Live (${masterLanguage})</strong>: <a href="${sitesLink}" target="_blank">${sitesLink}</a></p>`;
                        uniqueLinks.add(sitesLink);
                    }
                    if (!uniqueLinks.has(editorLink)) {
                        linksHTML += `<p><strong>Editor (${masterLanguage})</strong>: <a href="${editorLink}" target="_blank">${editorLink}</a></p>`;
                        uniqueLinks.add(editorLink);
                    }
                    if (!uniqueLinks.has(previewLink)) {
                        linksHTML += `<p><strong>Preview (${masterLanguage})</strong>: <a href="${previewLink}" target="_blank">${previewLink}</a></p>`;
                        uniqueLinks.add(previewLink);
                    }
                }
                linksHTML += generateAdditionalLinks(masterLanguage, localLanguage, customInput, localLanguages, liveSiteLanguage, linksDiv);
                linksDiv.innerHTML += linksHTML;
                removeDuplicateLinks(linksDiv);
            });
        }
        function generateLinksForCondition2(masterLanguage, localLanguagesChecked, customInput, linksDiv) {
            const uniqueLinks = new Set();
            const uniqueTexts = new Set();
            localLanguagesChecked.forEach((localLanguage) => {
                const parts = localLanguage.split("/");
                const liveSiteLanguage = parts[0];
                let linksHTML = ``;
                const Rollout = `https://author-grundfos-prod-65.adobecqms.net/mnt/overlay/wcm/msm/content/touch-ui/admin/rolloutdialog.html/content/grundfos/language-masters/${masterLanguage}/${customInput}`;
                const sitesLink = `https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/language-masters/${masterLanguage}/${customInput}`;
                const Properties = `https://author-grundfos-prod-65.adobecqms.net/mnt/overlay/wcm/core/content/sites/properties.html?item=/content/grundfos/language-masters/${masterLanguage}/${customInput}`;
                linksHTML += '<p class="openTagging"><strong>*************Start Tagging*************</strong></p>';
                linksHTML += `<p><strong>Master Language:</strong> ${masterLanguage}</p>`;
                linksHTML += `Site Live: <a href="${sitesLink}" target="_blank">${sitesLink}</a><br>`;
                linksHTML += `Rollout: <a href="${Rollout}" target="_blank">${Rollout}</a><br>`;
                linksHTML += `Properties: <a href="${Properties}" target="_blank">${Properties}</a><br>`;
                const localLanguagesList = localLanguages[masterLanguage] || [];
                if (localLanguagesChecked.includes(masterLanguage)) {
                    const remainingLanguages = localLanguagesList.filter((lang) => lang !== masterLanguage);
                    if (remainingLanguages.length > 0) {
                        linksHTML += `<p><strong>Master Language Selected (${masterLanguage}): ${remainingLanguages.join(", ")}</strong></p>`;
                    } else {
                        linksHTML += `<p><strong>Master Language Selected (${masterLanguage}): No additional locales available to display.</strong></p>`;
                    }
                    remainingLanguages.forEach((language) => {
                        linksHTML += generateLocalLanguageLinksTagging(language, customInput);
                        linksHTML += '<p class="closeTagging"><strong>*************End Tagging*************</strong></p>';
                    });
                } else if (localLanguagesChecked.length > 0) {
                    linksHTML += `<p><strong>Selected Local Languages:</strong> ${localLanguagesChecked.join(", ")}</p>`;
                    localLanguagesChecked.forEach((selectedLocalLanguage) => {
                        linksHTML += generateLocalLanguageLinksTagging(selectedLocalLanguage, customInput);
                        linksHTML += '<p class="closeTagging"><strong>*************End Tagging*************</strong></p>';
                    });
                } else {
                    linksHTML += `<p><strong>No local languages selected.</strong></p>`;
                }
                linksHTML += generateAdditionalLinks(masterLanguage, localLanguage, customInput, localLanguages, liveSiteLanguage, linksDiv);
                linksDiv.innerHTML += linksHTML;
            });
        }
        function generateLocalLanguageLinksTagging(language, customInput) {
            const localpublishLinks = [`https://author-grundfos-prod-65.adobecqms.net/mnt/override/libs/wcm/core/content/common/managepublicationwizard.html?item=/content/grundfos/${language}/${customInput}`];
            const localsitesLink = `https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/${language}/${customInput}`;
            const localProperties = `https://author-grundfos-prod-65.adobecqms.net/mnt/overlay/wcm/core/content/sites/properties.html?item=/content/grundfos/${language}/${customInput}`;
            return `<p><strong>Local Language (${language}):</strong></p>` + `Properties: <a href="${localProperties}" target="_blank">${localProperties}</a><br>` + `Publish: <a href="${localpublishLinks}" target="_blank">${localpublishLinks}</a><br>`;
        }
        let savedFragmentInputs = [];
        const fragmentInput = document.getElementById("fragmentInput");
        const savedFragmentsContainer = document.getElementById("savedFragments");
        const clearFragmentsButton = document.getElementById("clearFragments");
        const fragmentContainer = document.getElementById("fragmentContainer");
        clearFragmentsButton.addEventListener("click", () => {
            savedFragmentInputs = [];
            updateSavedFragmentsCheckboxes();
            fragmentContainer.innerHTML = "";
        });
        let currentMasterLanguage = "";
        let currentLocalLanguages = [];
        let currentSelectedFragments = [];
        document.addEventListener("DOMContentLoaded", () => {
            document.getElementById("masterLanguage").addEventListener("change", handleMasterLanguageChange);
            document.getElementById("addFragment").addEventListener("click", () => {
                const fragmentValue = fragmentInput.value.trim();
                if (fragmentValue && !savedFragmentInputs.includes(fragmentValue)) {
                    savedFragmentInputs.push(fragmentValue);
                    saveFragmentsToLocalStorage();
                    currentSelectedFragments = [fragmentValue];
                    updateSavedFragmentsCheckboxes();
                    selectNewlyAddedCheckbox(fragmentValue);
                    fragmentInput.value = "";
                    fragmentContainer.innerHTML = "";
                    generateLinksForCondition3();
                } else {
                }
            });
        });
        function saveFragmentsToLocalStorage() {
            localStorage.setItem("savedFragments", JSON.stringify(savedFragmentInputs));
        }
        function updateSavedFragmentsCheckboxes() {
            const savedFragmentContainer = document.getElementById("savedFragments");
            savedFragmentContainer.innerHTML = "";
            const checkedSavedFragments = JSON.parse(localStorage.getItem("checkedSavedFragments") || "[]");
            savedFragmentInputs.forEach((fragment) => {
                const fragmentsIndex = fragment.indexOf("/fragments");
                let fragmentPath = fragmentsIndex !== -1 ? fragment.substring(fragmentsIndex) : "";
                if (fragmentPath.endsWith(".html")) {
                    fragmentPath = fragmentPath.slice(0, -5);
                }
                if (fragmentPath.endsWith("/")) {
                    fragmentPath = fragmentPath.slice(0, -1);
                }
                const label = document.createElement("label");
                const checkbox = document.createElement("input");
                checkbox.type = "checkbox";
                checkbox.value = fragment;
                checkbox.checked = checkedSavedFragments.includes(fragment);
                checkbox.addEventListener("change", function () {
                    handleSavedFragmentChange();
                    toggleRemoveButton(checkbox, removeButton);
                    saveSavedFragmentsState();
                });
                const removeButton = document.createElement("button");
                removeButton.textContent = "X";
                removeButton.style.marginLeft = "10px";
                removeButton.style.marginTop = "0px";
                removeButton.style.cursor = "pointer";
                removeButton.style.padding = "5px";
                removeButton.style.display = checkbox.checked ? "inline-block" : "none";
                removeButton.addEventListener("click", function () {
                    removeFragment(fragment);
                    saveSavedFragmentsState();
                });
                label.appendChild(checkbox);
                label.appendChild(document.createTextNode(` ${fragmentPath}`));
                const fragmentDiv = document.createElement("div");
                fragmentDiv.appendChild(label);
                fragmentDiv.appendChild(removeButton);
                savedFragmentContainer.appendChild(fragmentDiv);
            });
        }
        function toggleRemoveButton(checkbox, removeButton) {
            removeButton.style.display = checkbox.checked ? "inline-block" : "none";
        }
        function removeFragment(fragment) {
            const index = savedFragmentInputs.indexOf(fragment);
            if (index !== -1) {
                savedFragmentInputs.splice(index, 1);
            }
            currentSelectedFragments = currentSelectedFragments.filter((f) => f !== fragment);
            updateSavedFragmentsCheckboxes();
            saveSavedFragmentsState();
            if (currentSelectedFragments.length === 0) {
                fragmentContainer.innerHTML = "";
            } else {
                handleSavedFragmentChange();
            }
            saveFragmentsToLocalStorage();
        }
        function selectNewlyAddedCheckbox(fragmentValue) {
            const checkbox = document.querySelector(`#savedFragments input[type="checkbox"][value="${fragmentValue}"]`);
            if (checkbox) {
                checkbox.checked = true;
            }
        }
        function handleSavedFragmentChange() {
            const selectedFragments = [];
            const savedFragmentCheckboxes = document.querySelectorAll('#savedFragments input[type="checkbox"]:checked');
            savedFragmentCheckboxes.forEach((checkbox) => {
                selectedFragments.push(checkbox.value);
            });
            currentSelectedFragments = selectedFragments;
            fragmentContainer.innerHTML = "";
            generateLinksForCondition3();
        }
        function handleMasterLanguageChange() {
            const masterLanguage = document.getElementById("masterLanguage").value;
            if (currentMasterLanguage !== masterLanguage) {
                currentMasterLanguage = masterLanguage;
                const searchContainer = document.getElementById("searchContainer");
                const button = document.getElementById("toggleSearchButton");
                searchContainer.style.display = "none";
                button.textContent = "Show Search Input";
                const localLanguageCheckboxes = document.querySelectorAll('#localLanguages input[type="checkbox"]');
                localLanguageCheckboxes.forEach((checkbox) => {
                    checkbox.checked = false;
                });
                const savedFragmentCheckboxes = document.querySelectorAll('#savedFragments input[type="checkbox"]');
                savedFragmentCheckboxes.forEach((checkbox) => {
                    checkbox.checked = false;
                });
                currentLocalLanguages = [];
                currentSelectedFragments = [];
                generateLinksForCondition3();
                updateLocalLanguages();
            }
        }
        document.addEventListener("DOMContentLoaded", () => {
            loadSelectionsFromLocalStorage();
            const saved = localStorage.getItem("savedFragments");
            if (saved) {
                savedFragmentInputs = JSON.parse(saved);
            }
            updateSavedFragmentsCheckboxes();
            const savedFragmentCheckboxes = document.querySelectorAll('#savedFragments input[type="checkbox"]');
            savedFragmentCheckboxes.forEach((checkbox) => {
                checkbox.addEventListener("change", handleSavedFragmentChange);
            });
            document.getElementById("masterLanguage").addEventListener("change", saveSelectionsToLocalStorage);
            document.querySelectorAll('#localLanguages input[type="checkbox"]').forEach(cb => {
                cb.addEventListener("change", saveSelectionsToLocalStorage);
            });
            document.querySelectorAll('input[name="condition"]').forEach(cb => {
                cb.addEventListener("change", saveSelectionsToLocalStorage);
            });
        });
        function generateLinksForCondition3() {
            const checkboxes = document.querySelectorAll('#localLanguages input[type="checkbox"]:checked');
            const localLanguagesChecked = Array.from(checkboxes).map((checkbox) => checkbox.value);
            let masterLanguage = document.getElementById("masterLanguage").value;
            fragmentContainer.innerHTML = "";
            if (!Array.isArray(localLanguagesChecked)) {
                localLanguagesChecked = [];
            }
            if (currentSelectedFragments.length === 0 || currentLocalLanguages.length === 0) {
                return;
            }
            currentSelectedFragments.forEach((fragment) => {
                const fragmentsIndex = fragment.indexOf("/fragments");
                let fragmentPath = fragmentsIndex !== -1 ? fragment.substring(fragmentsIndex) : "";
                if (fragmentPath.endsWith(".html")) {
                    fragmentPath = fragmentPath.slice(0, -5);
                }
                if (fragmentPath.endsWith("/")) {
                    fragmentPath = fragmentPath.slice(0, -1);
                }
                const masterLinkEditor = `https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/language-masters/${masterLanguage}${fragmentPath}`;
                const masterLinkSites = `https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/language-masters/${masterLanguage}${fragmentPath}`;
                const masterLinkPreview = `https://author-grundfos-prod-65.adobecqms.net/content/grundfos/language-masters/${masterLanguage}${fragmentPath}?wcmmode=disabled`;
                let fragmentHtml = `<p class="link-part"><strong>Selected Fragment:</strong> "${fragmentPath}"</p>`;
                if (masterLanguage !== "en-GB") {
                    fragmentHtml += `<p><strong>Master Language:</strong> en-GB</p>`;
                    fragmentHtml += `Site Live (en-GB): <a href="https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/language-masters/en-GB${fragmentPath}" target="_blank">https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/language-masters/en-GB${fragmentPath}</a><br>`;
                    fragmentHtml += `Editor (en-GB): <a href="https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/language-masters/en-GB${fragmentPath}" target="_blank">https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/language-masters/en-GB${fragmentPath}</a><br>`;
                    fragmentHtml += `Preview (en-GB): <a href="https://author-grundfos-prod-65.adobecqms.net/content/grundfos/language-masters/en-GB${fragmentPath}?wcmmode=disabled" target="_blank">https://author-grundfos-prod-65.adobecqms.net/content/grundfos/language-masters/en-GB${fragmentPath}?wcmmode=disabled</a><br>`;
                }
                fragmentHtml += `<p><strong>Master Language:</strong> ${masterLanguage}</p>`;
                fragmentHtml += `Site Live: <a href="${masterLinkSites}" target="_blank">${masterLinkSites}</a><br>`;
                fragmentHtml += `Editor: <a href="${masterLinkEditor}" target="_blank">${masterLinkEditor}</a><br>`;
                fragmentHtml += `Preview: <a href="${masterLinkPreview}" target="_blank">${masterLinkPreview}</a><br>`;
                const localLanguagesList = localLanguages[masterLanguage] || [];
                if (localLanguagesChecked.includes(masterLanguage)) {
                    const remainingLanguages = localLanguagesList.filter((lang) => lang !== masterLanguage);
                    if (remainingLanguages.length > 0) {
                        fragmentHtml += `<p><strong>Master Language Selected (${masterLanguage}): ${remainingLanguages.join(", ")}</strong></p>`;
                    } else {
                        fragmentHtml += `<p><strong>Master Language Selected (${masterLanguage}): No additional locales available to display.</strong></p>`;
                    }
                    remainingLanguages.forEach((language) => {
                        fragmentHtml += generateLocalLanguageLinks(language, fragmentPath);
                    });
                } else if (localLanguagesChecked.length > 0) {
                    fragmentHtml += `<p><strong>Selected Local Languages:</strong> ${localLanguagesChecked.join(", ")}</p>`;
                    localLanguagesChecked.forEach((selectedLocalLanguage) => {
                        fragmentHtml += generateLocalLanguageLinks(selectedLocalLanguage, fragmentPath);
                    });
                } else {
                    fragmentHtml += `<p><strong>No local languages selected.</strong></p>`;
                }
                fragmentContainer.innerHTML += fragmentHtml;
            });
        }
        function generateLocalLanguageLinks(language, fragmentPath) {
            const localLinkEditorLocal = `https://author-grundfos-prod-65.adobecqms.net/editor.html/content/grundfos/${language}${fragmentPath}`;
            const localLinkSitesLocal = `https://author-grundfos-prod-65.adobecqms.net/sites.html/content/grundfos/${language}${fragmentPath}`;
            const localLinkDisabledLocal = `https://author-grundfos-prod-65.adobecqms.net/content/grundfos/${language}${fragmentPath}?wcmmode=disabled`;
            return (
                `<p><strong>Local Language (${language}):</strong></p>` +
                `Site Live: <a href="${localLinkSitesLocal}" target="_blank">${localLinkSitesLocal}</a><br>` +
                `Editor: <a href="${localLinkEditorLocal}" target="_blank">${localLinkEditorLocal}</a><br>` +
                `Preview: <a href="${localLinkDisabledLocal}" target="_blank">${localLinkDisabledLocal}</a><br>`
            );
        }
        document.addEventListener("DOMContentLoaded", function () {
            const select = document.getElementById("masterLanguage");
            const options = Array.from(select.options);
            options.sort((a, b) => {
                if (a.value === "") return -1;
                return a.text.localeCompare(b.text);
            });
            select.innerHTML = "";
            options.forEach((option) => {
                select.appendChild(option);
            });
        });
        document.addEventListener("DOMContentLoaded", function () {
            const customInput = document.getElementById("customInput");
            const masterLanguage = document.getElementById("masterLanguage");
            masterLanguage.disabled = true;
            customInput.addEventListener("input", function () {
                masterLanguage.disabled = customInput.value.trim() === "";
            });
        });
        document.querySelectorAll('input[name="condition"]').forEach((checkbox) => {
            checkbox.addEventListener("change", function () {
                const fragmentSection = document.getElementById("fragmentSection");
                if (this.value === "radio3" && this.checked) {
                    fragmentSection.classList.remove("hidden");
                } else if (this.value === "radio3" && !this.checked) {
                    fragmentSection.classList.add("hidden");
                }
            });
        });
        function convertText() {
            const input = document.getElementById("inputText").value.trim();
            if (input.length === 0) {
                return;
            }
            const output = input.charAt(0).toUpperCase() + input.slice(1).toLowerCase();
            document.getElementById("inputText").value = output;
        }
        document.addEventListener("DOMContentLoaded", () => {
            let previousLink = null;
            observeContainers();
            loadLinkStates();
            updateResetButtons();
            document.addEventListener("click", (event) => {
                const target = event.target;
                if (target && target.tagName === "A") {
                    const parentContainer = target.closest("#links, #fragmentContainer");
                    if (parentContainer) {
                        const currentLang = getCurrentLang();
                        if (previousLink) {
                            previousLink.classList.remove("active");
                            previousLink.classList.add("previous");
                            saveLinkState(currentLang, previousLink.href, "previous");
                        }
                        target.classList.add("active");
                        target.classList.remove("previous");
                        saveLinkState(currentLang, target.href, "active");
                        previousLink = target;
                        updateResetButtons();
                    }
                }
            });
            document.getElementById("resetLinks").addEventListener("click", () => {
                resetLinks("#links");
                alert("The link status in #links has been reset!");
            });
            document.getElementById("resetFragmentLinks").addEventListener("click", () => {
                resetLinks("#fragmentContainer");
                alert("The link state in #fragmentContainer has been reset!");
            });
            function saveLinkState(lang, href, state) {
                const storageKey = `linkStates_${lang}`;
                const linkStates = JSON.parse(localStorage.getItem(storageKey) || "{}");
                linkStates[href] = state;
                localStorage.setItem(storageKey, JSON.stringify(linkStates));
            }
            function loadLinkStates() {
                const currentLang = getCurrentLang();
                const storageKey = `linkStates_${currentLang}`;
                const linkStates = JSON.parse(localStorage.getItem(storageKey) || "{}");
                ["#links", "#fragmentContainer"].forEach((containerId) => {
                    const container = document.querySelector(containerId);
                    if (!container) return;
                    for (const [href, state] of Object.entries(linkStates)) {
                        const link = Array.from(container.querySelectorAll("a")).find((link) => link.href === href);
                        if (link) {
                            link.classList.add(state);
                            if (state === "active") previousLink = link;
                        }
                    }
                });
                updateResetButtons();
            }
            function resetLinks(containerId) {
                document.querySelectorAll(`${containerId} a`).forEach((link) => {
                    link.classList.remove("active", "previous");
                });
                const linksLang = getCurrentLang();
                const storageKey = `linkStates_${linksLang}`;
                localStorage.removeItem(storageKey);
                updateResetButtons();
            }
            function getCurrentLang() {
                const pathParts = window.location.pathname.split("/").filter((part) => part);
                return pathParts.length >= 2 ? `${pathParts[0]}/${pathParts[1]}` : "default";
            }
            function observeContainers() {
                const observer = new MutationObserver(() => {
                    loadLinkStates();
                });
                const config = { childList: true, subtree: true };
                ["#links", "#fragmentContainer"].forEach((containerId) => {
                    const container = document.querySelector(containerId);
                    if (container) observer.observe(container, config);
                });
            }
            function updateResetButtons() {
                const hasActiveLinks = document.querySelector("#links a.active, #links a.previous");
                const hasActiveFragmentLinks = document.querySelector("#fragmentContainer a.active, #fragmentContainer a.previous");
                document.getElementById("resetLinks").style.display = hasActiveLinks ? "block" : "none";
                document.getElementById("resetFragmentLinks").style.display = hasActiveFragmentLinks ? "block" : "none";
            }
        });
        document.getElementById("customInput").addEventListener("keydown", function (event) {
            if (event.key === "Enter") {
                generateLinks();
            }
        });
        document.getElementById("searchInput").addEventListener("keydown", function (event) {
            if (event.key === "Enter") {
                applySearchInput();
            }
        });
        document.getElementById("customInput").addEventListener("keydown", function (event) {
            if (event.key === "Enter") {
                event.preventDefault();
                document.getElementById("generateAndSaveBtn").click();
            }
        });
        document.addEventListener("keydown", function (event) {
            if (event.target.id === "masterCodeInput" && event.key === "Enter") {
                event.preventDefault();
                generateMasterCheckboxes();
            }
        });
        document.getElementById("fragmentInput").addEventListener("keydown", function (event) {
            if (event.key === "Enter") {
                const fragmentValue = fragmentInput.value.trim();
                if (fragmentValue && !savedFragmentInputs.includes(fragmentValue)) {
                    savedFragmentInputs.push(fragmentValue);
                    currentSelectedFragments = [fragmentValue];
                    updateSavedFragmentsCheckboxes();
                    selectNewlyAddedCheckbox(fragmentValue);
                    fragmentInput.value = "";
                    fragmentContainer.innerHTML = "";
                    generateLinksForCondition3();
                } else {
                }
            }
        });
        function saveSelectionsToLocalStorage() {
            const masterLanguage = document.getElementById("masterLanguage").value;
            const localLanguageCheckboxes = document.querySelectorAll('#localLanguages input[type="checkbox"]:checked');
            const taskCheckboxes = document.querySelectorAll('input[name="condition"]:checked');
            const selectedLocalLanguages = Array.from(localLanguageCheckboxes).map(cb => cb.value);
            const selectedTasks = Array.from(taskCheckboxes).map(cb => cb.value);
            localStorage.setItem("selectedMasterLanguage", masterLanguage);
            localStorage.setItem("selectedLocalLanguages", JSON.stringify(selectedLocalLanguages));
            localStorage.setItem("selectedTaskTypes", JSON.stringify(selectedTasks));
        }
        function loadSelectionsFromLocalStorage() {
            const masterSelect = document.getElementById("masterLanguage");
            if (masterSelect) {
                const masterLanguage = localStorage.getItem("selectedMasterLanguage");
                if (masterLanguage) {
                    masterSelect.value = masterLanguage;
                    masterSelect.dispatchEvent(new Event("change"));
                }
            }
            const customInput = document.getElementById("customInput");
            if (customInput) {
                const savedCustomInput = localStorage.getItem("customInputValue") || "";
                customInput.value = savedCustomInput;
            }
            const fragmentInput = document.getElementById("fragmentInput");
            if (fragmentInput) {
                const savedFragmentInput = localStorage.getItem("fragmentInputValue") || "";
                fragmentInput.value = savedFragmentInput;
            }
            const localLanguageCheckboxes = document.querySelectorAll('#localLanguages input[type="checkbox"]');
            const selectedLocalLanguages = JSON.parse(localStorage.getItem("selectedLocalLanguages") || "[]");
            localLanguageCheckboxes.forEach(cb => {
                cb.checked = selectedLocalLanguages.includes(cb.value);
            });
            const taskCheckboxes = document.querySelectorAll('input[name="condition"]');
            const selectedTasks = JSON.parse(localStorage.getItem("selectedTaskTypes") || "[]");
            taskCheckboxes.forEach(cb => {
                cb.checked = selectedTasks.includes(cb.value);
            });
        }
        function saveSavedFragmentsState() {
            const savedFragmentCheckboxes = document.querySelectorAll('#savedFragments input[type="checkbox"]');
            const checkedFragments = [];
            savedFragmentCheckboxes.forEach(checkbox => {
                if (checkbox.checked) checkedFragments.push(checkbox.value);
            });
            localStorage.setItem("checkedSavedFragments", JSON.stringify(checkedFragments));
        }
    </script>
</body>

</html>